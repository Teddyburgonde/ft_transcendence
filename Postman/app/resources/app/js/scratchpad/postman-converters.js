"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[26],{6688:function(e,t,r){r.r(t);var n=r(6008);t.default={exportSingle:n.default}},6683:function(e,t,r){r.r(t),r.d(t,{default:function(){return s}});var n=r(1706),o=r(1735),a=r(3895),i=r(1803),l=r(12);function s(e){e=decodeURIComponent(e);var t,r=a.default.getHashVars(e);l.each(r,(function(e){var r=decodeURIComponent(e.key);if(0==r.indexOf("env[")&&"]"==r[r.length-1])try{var a="";try{a=atob(e.value)}catch(t){if(!l.endsWith(e.value,'"'))throw t;e.value=e.value.substring(0,e.value.length-1),a=atob(e.value)}var s=r.substring(4,r.length-1),c=JSON.parse(a),u=[];if(c instanceof Array){var d=c.length;for(t=0;t<d;t++)u.push(l.assign({type:"text",enabled:!0},c[t]))}else l.forOwn(c,(function(e,t){u.push({key:t,value:e,type:"text",enabled:!0})}));i.default.get().then((e=>{let t={name:"create",namespace:"environment",data:{id:o.default.guid(),name:s,values:u,owner:e.id}};(0,n.default)(t),pm.toasts.success("Environment "+s+" imported")})).catch((e=>{pm.logger.error("Error in creating evironment",e)}))}catch(e){console.log("Could not import environment")}}))}},6684:function(e,t,r){r.r(t),r.d(t,{default:function(){return s}});var n=r(6682),o=r(1697),a=r(1735),i=r(3895),l=r(12);function s(e){n.default.importFileFromUrl(e,((t,r)=>{if(t)return pm.logger.error(t);n.default.checkImportEnvironmentFromUrl(e);var s=i.default.getUrlVars(e),c=l.find(s,(function(e){return"referrer"===e.key})),u=c?decodeURIComponent(c.value):"";o.default.addEvent("collection","create","run_button",null,{referrer:u,collection_id:r.id,collection_link_id:a.default.getCollectionLinkId(e)})}))}},6685:function(e,t,r){r.r(t),r.d(t,{default:function(){return l},parseUrlData:function(){return s}});var n=r(12),o=r.n(n),a=r(5377),i=r(1815);r(1731);function l(e,t){i.default.request(e).then((({body:r})=>{try{a.default.importData(r,{origin:"import/link",link:e}).then((()=>{o().isFunction(t)&&t(null,r)}))}catch(e){"Could not parse"==e?(pm.mediator.trigger("failedCollectionImport","format not recognized"),o().isFunction(t)&&t("format not recognized")):(pm.mediator.trigger("failedCollectionImport","Could not import: "+e),o().isFunction(t)&&t("Could not import: "+e))}})).catch((({error:e})=>{console.log("Error response while importing: ",e),pm.mediator.trigger("failedCollectionImport","Error response received from URL. Check the console for more."),o().isFunction(t)&&t("Error response received from URL. Check the console for more.")}))}function s(e,t=!0){return i.default.request(e).then((({body:e})=>e)).catch((({error:e})=>(pm.logger.warn("Error while parsing url data: ",e),t&&pm.toasts.error("Error while fetching data from link."),null)))}},6686:function(e,t,r){r.r(t),r.d(t,{default:function(){return i}});var n=r(5377),o=r(863),a=r.n(o);function i(e,t,r){a().eachSeries(e,((o,a)=>{let i=new FileReader;i.onload=function(o){var i=o.currentTarget.result;if("importByFileContainer"===t&&r&&1===e.length)return r(i,{origin:"import/file"});n.default.importData(i,{origin:"import/file"},a)},i.readAsText(o)}))}},6682:function(e,t,r){r.r(t);var n=r(6683),o=r(6684),a=r(4350),i=r(6685),l=r(6686),s=r(5386),c=r(6687),u=r(5378),d=r(863),p=r.n(d),f=r(4198),m=r(12);function v(e,t){e?e.isUserFriendly?pm.toasts.error(e.message,{dedupeId:"failed-collection-import"}):pm.toasts.error("Failed to import collection "+t.name,{dedupeId:"failed-collection-import"}):pm.toasts.success("Collection "+t.name+" imported")}t.default={checkImportEnvironmentFromUrl:n.default,importCollectionAndEnvironment:o.default,importData:async function(e,t,r){if(m.isEmpty(e))return m.isFunction(r)&&r();p().series([r=>{u.default.importCollections(e.collections,t,v,(e=>{r(null,e)}))},r=>{u.default.importGlobals(e.globals,m.pick(t,["activeWorkspace","silentToasts"]),(e=>{r(null,e)}))},r=>{u.default.importHeaderPresets(e.headerPresets,m.pick(t,["currentUserID","activeWorkspace","silentToasts"]),(e=>{r(null,e)}))},r=>{u.default.importEnvironments(e.environments,m.pick(t,["currentUserID","silentToasts","activeWorkspace"]),(e=>{r(null,e)}))},t=>{u.default.importRequests(e.requests,(e=>{t(null,e)}))},r=>{u.default.importCollectionRuns(e.runsInfo,e.events,t,f.handleCollectionRunImportStatus,(e=>{r(null,e)}))}],((e,t)=>{let n={};m.forEach(m.compact(t),(e=>{n[e.type]=m.pick(e,["total","imported","failed"])})),m.isFunction(r)&&r(n)}))},convertRawData:a.default,importDataAs:a.importDataAs,stringify:a.stringify,importFileFromUrl:i.default,parseUrlData:i.parseUrlData,importFiles:l.default,importFolder:s.default,saveEntity:c.default}},6687:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var n=r(4199),o=r(6688),a=r(1697),i=r(6004),l=r(12);const s={json:"application/json"},c="\t",u="collection",d="environment",p="globals",f=".json";function m(e,t={}){let r,m,v,h=t.type,g=l.get(t,"outputVersion","2.1.0");if(h)return o.default.exportSingle(h,e,t).then((e=>{if(!(e&&s[e.type]&&e[e.type]))throw console.warn("Invalid data or unsupported file type",e),new Error("saveEntity: invalid data received");return e})).then((e=>{r=e,m=s[r.type],v=l.get(r,"meta.fileName",h+f)})).then((()=>JSON.stringify(r.json,null,c))).then((e=>new Promise(((t,r)=>{(0,n.saveAndOpenFile)(v,e,m,((e,n)=>{if(e)return console.warn("Error while saving the exported entity",e),void r(e);t(n)}))})))).then((t=>{if(t!==i.EXPORT_STATE.SUCCESS)return;switch(h){case u:a.default.addEvent(u,"download",g,null,{collection_id:e.id}),pm.toasts.success("Your collection was exported successfully.");break;case d:a.default.addEvent(h,"download"),pm.toasts.success("Your environment was exported successfully.");break;case p:a.default.addEvent(h,"download"),pm.toasts.success("Your globals were exported successfully.")}})).catch((r=>{pm.toasts.error("Unable to export this entity. Please check the DevTools."),console.warn("Error while exporting an entity",e,t,r)}));console.warn(`Unsupported type '${h}' for exporting`)}}}]);