"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[12],{7459:function(e,t,s){s.r(t);var i=s(1),o=s(4),n=s(2083),r=s.n(n),l=s(2102),a=s.n(l),d=s(2802),h=s(2537),c=s(2112),p=s(5046),m=s(2098),u=s(4194),S=s(2538),g=s(6694),T=s(4570),b=s(5859),E=s(7446),y=s(7448),_=s(3916),f=s(5803),I=s(1799),v=s(5055),A=s(1821);const C=(0,A.c)(class extends i.Component{constructor(e){super(e),this.handleAddRequest=()=>{if(I.default.isEnabled)return pm.mediator.trigger("showSignInModal",{type:"save",origin:"save_shortcut",subtitle:v.HISTORY_SIGNIN_MODAL_SUBTITLE})},this.state={isTooltipVisible:!1},this.userAvatar=i.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleAction=this.handleAction.bind(this),this.handleDelete=this.handleDelete.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,o.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,o.findDOMNode)(this);e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}getClasses(){return a()({"history-sidebar-list-item":!0,"history-sidebar-list-item__extensibleitem":!0,"is-selected":this.props.selected})}getTooltipText(e){if(!e)return"Delete history"}getLeftAlignedComponents(e){var t;if(!e)return i.createElement("div",{className:"history-sidebar__indent"});const s=(0,_.resolveStoreInstance)(f.default),o=a()({"history-sidebar-list-item-updatedBy":!0,hovered:e}),n=s.isCurrentUserPartner?null===(t=s.partnerMembersByIds)||void 0===t?void 0:t[this.props.userId]:s.teamMembers.get(String(this.props.userId)),l=n&&(n.name||n.username);return i.createElement("div",{className:o,onMouseOver:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.userId&&"0"!==this.props.userId?i.createElement(u.default,{ref:this.userAvatar,size:"small",userId:this.props.userId}):i.createElement(c.default,{name:"icon-descriptive-user-stroke",color:"content-color-secondary",ref:this.userAvatar}),this.userAvatar.current&&i.createElement(S.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},i.createElement(S.TooltipBody,null,i.createElement("div",{className:"history-sidebar-list-item-avatar-tooltip"},i.createElement(d.default,{type:"body-medium"},l),i.createElement(d.default,{type:"body-medium"},r()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e){const t=a()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e)return null;const s=(0,_.resolveStoreInstance)(b.default),{userCanSave:o}=(0,_.resolveStoreInstance)(T.default),n=o&&s.can("delete","history");return i.createElement("div",{className:t},i.createElement(h.Button,{type:"icon",onClick:this.handleAddRequest,disabled:!o,tooltip:o?y.ACTION_TYPE_SAVE_REQUEST_TOOLTIP:null},i.createElement(c.default,{size:"large",name:"icon-action-add-stroke",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),i.createElement(h.Button,{type:"icon",onClick:this.handleDelete,disabled:!n,tooltip:this.getTooltipText(!n,!o)},i.createElement(c.default,{name:"icon-action-delete-stroke",size:"large",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})))}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"ecitemhistory",itemType:this.props.itemType},t)}handleAction(e){this.props.onSelectAction(e,{ecitemhistory:[this.props.id]})}handleDelete(e){e.stopPropagation(),this.handleAction(E.ACTION_TYPE_DELETE)}render(){var e;const t=null===(e=pm.ECItemRegistry)||void 0===e?void 0:e.getConfig(this.props.itemType);return t?i.createElement("div",{"data-index":this.props.index},i.createElement(g.default,{text:this.props.url,icon:i.createElement(p.default,{name:t.icon,color:t.iconColor}),isSelected:this.props.isSelected,onClick:this.handleSelect,className:this.getClasses(),leftMetaComponent:this.getLeftAlignedComponents,rightMetaComponent:this.getRightAlignedComponents})):null}},[m.observer]);t.default=C},7446:function(e,t,s){s.r(t),s.d(t,{ACTION_TYPE_DELETE:function(){return l},ACTION_TYPE_DOCUMENT:function(){return n},ACTION_TYPE_DOWNLOAD:function(){return a},ACTION_TYPE_MOCK:function(){return r},ACTION_TYPE_MONITOR:function(){return o},ACTION_TYPE_SAVE:function(){return i}});const i="save",o="monitor",n="document",r="mock",l="delete",a="download"},7448:function(e,t,s){s.r(t),s.d(t,{ACTION_TYPE_DELETE_REQUESTS_TOOLTIP:function(){return o},ACTION_TYPE_DELETE_REQUEST_TOOLTIP:function(){return i},ACTION_TYPE_SAVE_REQUESTS_TOOLTIP:function(){return r},ACTION_TYPE_SAVE_REQUEST_TOOLTIP:function(){return n}});const i="Delete request",o="Delete items",n="Add request to Collection",r="Add requests to Collection"},7449:function(e,t,s){s.r(t);var i=s(1),o=s(2102),n=s.n(o),r=s(2098),l=s(2112),a=s(2884),d=s(2537),h=s(4192),c=s(7446),p=s(3928),m=s(3049),u=s(1822),S=s(3819),g=s(3790),T=s(1821);const b="Not available to collection run items",E=(0,T.c)(class extends i.Component{constructor(e){super(e),this.handleSelect=this.handleSelect.bind(this),this.handleShortcutSelect=this.handleShortcutSelect.bind(this),this.handleToggle=this.handleToggle.bind(this)}getKeymapHandlers(){return{delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,c.ACTION_TYPE_DELETE))}}handleShortcutSelect(e){pm.mediator.trigger("focusSidebar"),this.handleSelect(e)}handleSelect(e){this.props.onSelect&&this.props.onSelect(e),this.handleToggle(!1)}handleToggle(e){this.props.onToggle&&this.props.onToggle(e)}getDropDownActionWrapperClasses(){return n()({"collection-sidebar-request-dropdown-actions-wrapper":!0})}getDisabledText(e){if(e)return(0,u.getStore)("OnlineStatusStore").userCanSave?m.DISABLED_TOOLTIP_NO_PERMISSION:m.DISABLED_TOOLTIP_IS_OFFLINE}render(){const e=h.default.pluralize({count:this.props.count,singular:"Request",plural:"Requests"}),t=(0,u.getStore)("PermissionStore"),{userCanSave:s}=(0,u.getStore)("OnlineStatusStore"),o=s&&t.can("delete","history");return i.createElement("div",{className:this.getDropDownActionWrapperClasses()},i.createElement(a.Dropdown,{keyMapHandlers:this.getKeymapHandlers(),ref:"menu",onSelect:this.handleSelect,onToggle:this.handleToggle,className:"collection-sidebar-request-actions-dropdown history-sidebar-multiple-request-selected-dropdown"},i.createElement(a.DropdownButton,{dropdownStyle:"nocaret",type:"custom"},i.createElement(d.Button,{className:"history-sidebar-list-item__button__options",tooltip:S.ACTION_TYPE_VIEW_MORE_ACTIONS_TOOLTIP}," ",i.createElement(l.default,{name:"icon-action-options-stroke",className:"history-sidebar-list-item__actions__options pm-icon pm-icon-normal"}))),i.createElement(a.DropdownMenu,{"align-right":!0},i.createElement(a.MenuItem,{refKey:c.ACTION_TYPE_SAVE,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?b:m.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},`Save ${e}`)),i.createElement(a.MenuItem,{refKey:c.ACTION_TYPE_MONITOR,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?b:p.DISABLED_IN_SCRATCHPAD_TOOLTIP:m.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},`Monitor ${e}`)),i.createElement(a.MenuItem,{refKey:c.ACTION_TYPE_DOCUMENT,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?b:p.DISABLED_IN_SCRATCHPAD_TOOLTIP:m.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},`Document ${e}`)),i.createElement(a.MenuItem,{refKey:c.ACTION_TYPE_MOCK,disabled:!s||this.props.disableRequestSpecificActions,disabledText:s?this.props.disableRequestSpecificActions?b:p.DISABLED_IN_SCRATCHPAD_TOOLTIP:m.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},`Mock ${e}`)),i.createElement(a.MenuItem,{refKey:c.ACTION_TYPE_DOWNLOAD,disabled:!s||!this.props.disableRequestSpecificActions,disabledText:s?"You can only export collection runs":m.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},"Export")),i.createElement(a.MenuItem,{refKey:c.ACTION_TYPE_DELETE,disabled:!o,disabledText:this.getDisabledText(!o)},i.createElement("div",{className:"dropdown-menu-item-label"},"Delete"),i.createElement("div",{className:"dropdown-menu-item-shortcut"},(0,g.getShortcutByName)("delete"))))))}},[r.observer]);t.default=E},7457:function(e,t,s){s.r(t);var i=s(1),o=s(4),n=s(2102),r=s.n(n),l=s(2112),a=s(2083),d=s.n(a),h=s(2098),c=s(2537),p=s(4194),m=s(2538),u=s(7446),S=s(3049),g=s(1822),T=s(6694),b=s(1821);const E=(0,b.c)(class extends i.Component{constructor(e){super(e),this.state={dropdownOpen:!1,isTooltipVisible:!1},this.userAvatar=i.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleRemoveRun=this.handleRemoveRun.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,o.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,o.findDOMNode)(this);e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"collectionrun"},t)}getClasses(){return r()({"history-sidebar-list-item":!0,"history-sidebar-list-item__collection":!0,"is-hovered":this.state.dropdownOpen,"is-selected":this.props.selected})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){this.props.onSelectAction(e,{runs:[this.props.id]})}handleRemoveRun(e){e.stopPropagation(),this.handleDropdownActionSelect(u.ACTION_TYPE_DELETE)}getTooltipText(e){return e?(0,g.getStore)("OnlineStatusStore").userCanSave?S.DISABLED_TOOLTIP_NO_PERMISSION:S.DISABLED_TOOLTIP_IS_OFFLINE:"Delete collection run"}getLeftAlignedComponents(e,t){const s=r()({"history-sidebar-list-item-updatedBy":!0,hovered:e});if(!e&&!t)return i.createElement("div",{className:"history-sidebar__indent"});const o=(0,g.getStore)("CurrentUserStore").teamMembers.get(this.props.owner),n=o&&(o.name||o.username);return i.createElement("div",{className:s,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.owner&&"0"!==this.props.owner?i.createElement(p.default,{ref:this.userAvatar,size:"small",userId:this.props.owner}):i.createElement(l.default,{name:"icon-descriptive-user-stroke",className:"pm-icon pm-icon-normal"}),this.userAvatar.current&&i.createElement(m.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},i.createElement(m.TooltipBody,null,i.createElement("div",null,i.createElement("div",null,n),i.createElement("div",null,d()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e,t){const s=r()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e&&!t)return null;const o=(0,g.getStore)("PermissionStore"),{userCanSave:n}=(0,g.getStore)("OnlineStatusStore"),a=n&&o.can("delete","collectionrun",this.props.id);return i.createElement("div",{className:s},i.createElement(c.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRun,disabled:!a,tooltip:this.getTooltipText(!a)},i.createElement(l.default,{name:"icon-action-delete-stroke",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})))}render(){return i.createElement(T.default,{"data-index":this.props.index,text:this.props.name,icon:"icon-action-run-stroke",isSelected:this.props.selected,onClick:this.handleSelect,className:this.getClasses(),rightMetaComponent:this.getRightAlignedComponents,leftMetaComponent:this.getLeftAlignedComponents})}},[h.observer]);t.default=E},7456:function(e,t,s){s.r(t),s.d(t,{default:function(){return o}});var i=s(1);function o(e){return i.createElement("div",{className:"history-sidebar-list-item-group"},i.createElement("div",{className:"history-sidebar-list-item-group__error"},"Unable to load items."," ",i.createElement("span",{onClick:e.onRetry},"Retry")))}},7454:function(e,t,s){s.r(t);var i=s(1),o=s(4),n=s(2102),r=s.n(n),l=s(2083),a=s.n(l),d=s(2098),h=s(2112),c=s(2537),p=s(2884),m=s(4194),u=s(2538),S=s(6694),g=s(7446),T=s(3049),b=s(3928),E=s(1822),y=s(7448),_=s(5628),f=s(3790),I=s(1799),v=s(5055),A=s(1821);const C=(0,A.c)(class extends i.Component{constructor(e){super(e),this.state={dropdownOpen:!1,isTooltipVisible:!1},this.userAvatar=i.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddRequestToCollectionClick=this.handleAddRequestToCollectionClick.bind(this),this.handleRemoveRequest=this.handleRemoveRequest.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,o.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,o.findDOMNode)(this);if(!e)return;e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView()}}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"request"},t)}getClasses(){return r()({"history-sidebar-list-item":!0,"history-sidebar-list-item__request":!0,"is-hovered":this.state.dropdownOpen,"is-selected":this.props.selected})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){this.props.onSelectAction(e,{requests:[this.props.id],from:"history_single"})}handleAddRequestToCollectionClick(e){if(e.stopPropagation(),I.default.isEnabled)return pm.mediator.trigger("showSignInModal",{type:"save",origin:"save_shortcut",subtitle:v.HISTORY_SIGNIN_MODAL_SUBTITLE});this.handleDropdownActionSelect(g.ACTION_TYPE_SAVE,{from:"history_single"})}handleRemoveRequest(e){e.stopPropagation(),this.handleDropdownActionSelect(g.ACTION_TYPE_DELETE)}getTooltipText(e,t){return e?t?T.DISABLED_TOOLTIP_IS_OFFLINE:T.DISABLED_TOOLTIP_NO_PERMISSION:y.ACTION_TYPE_DELETE_REQUEST_TOOLTIP}getDisabledText(e,t){if(e)return t?T.DISABLED_TOOLTIP_IS_OFFLINE:T.DISABLED_TOOLTIP_NO_PERMISSION}getLeftAlignedComponents(e,t){const s=r()({"history-sidebar-list-item-updatedBy":!0,hovered:e});if(!e&&!t)return i.createElement("div",{className:"history-sidebar__indent"});const o=(0,E.getStore)("CurrentUserStore").teamMembers.get(this.props.lastUpdatedBy),n=o&&(o.name||o.username);return i.createElement("div",{className:s,onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.lastUpdatedBy&&"0"!==this.props.lastUpdatedBy?i.createElement(m.default,{ref:this.userAvatar,size:"small",userId:this.props.lastUpdatedBy}):i.createElement(h.default,{name:"icon-descriptive-user-stroke",className:"pm-icon pm-icon-normal",ref:this.userAvatar}),this.userAvatar.current&&i.createElement(u.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},i.createElement(u.TooltipBody,null,i.createElement("div",null,i.createElement("div",null,n||""),i.createElement("div",null,a()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e,t){const s=r()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e&&!t)return null;const o=(0,E.getStore)("PermissionStore"),{userCanSave:n}=(0,E.getStore)("OnlineStatusStore"),l=n&&o.can("delete","history",this.props.id);return i.createElement("div",{className:s},i.createElement(c.Button,{className:"history-sidebar-list-item__button__add",type:"icon",onClick:this.handleAddRequestToCollectionClick,disabled:!n,tooltip:n?y.ACTION_TYPE_SAVE_REQUEST_TOOLTIP:T.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement(h.default,{size:"large",name:"icon-action-add-stroke",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),i.createElement(c.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRequest,disabled:!l,tooltip:this.getTooltipText(!l,!n)},i.createElement(h.default,{name:"icon-action-delete-stroke",size:"large",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})))}getActionsMenuItems(e){if(I.default.isEnabled)return null;const{userCanSave:t,userCanSaveAndSync:s}=(0,E.getStore)("OnlineStatusStore");return i.createElement(p.DropdownMenu,{"align-right":!0},i.createElement(p.MenuItem,{refKey:g.ACTION_TYPE_SAVE,disabled:!t,disabledText:T.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},"Save Request")),i.createElement(p.MenuItem,{refKey:g.ACTION_TYPE_MONITOR,disabled:!s,disabledText:t?b.DISABLED_IN_SCRATCHPAD_TOOLTIP:T.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},"Monitor Request")),i.createElement(p.MenuItem,{refKey:g.ACTION_TYPE_DOCUMENT,disabled:!s,disabledText:t?b.DISABLED_IN_SCRATCHPAD_TOOLTIP:T.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},"Document Request")),i.createElement(p.MenuItem,{refKey:g.ACTION_TYPE_MOCK,disabled:!s,disabledText:t?b.DISABLED_IN_SCRATCHPAD_TOOLTIP:T.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement("div",{className:"dropdown-menu-item-label"},"Mock Request")),i.createElement(p.MenuItem,{refKey:g.ACTION_TYPE_DELETE,disabled:!t||!e,disabledText:this.getDisabledText(!e,!t)},i.createElement("div",{className:"dropdown-menu-item-label"},"Delete"),i.createElement("div",{className:"dropdown-menu-item-shortcut"},(0,f.getShortcutByName)("delete"))))}render(){const e=(0,E.getStore)("PermissionStore").can("delete","history",this.props.id);return i.createElement(S.default,{"data-index":this.props.index,text:this.props.url,onClick:this.handleSelect,isSelected:this.props.selected,icon:i.createElement(_.default,{method:this.props.method||"GET"}),className:this.getClasses(),moreActions:this.getActionsMenuItems(e),rightMetaComponent:this.getRightAlignedComponents,leftMetaComponent:this.getLeftAlignedComponents,onActionsDropdownSelect:this.handleDropdownActionSelect})}},[d.observer]);t.default=C},7455:function(e,t,s){s.r(t),s.d(t,{default:function(){return g}});var i=s(1),o=s(2102),n=s.n(o),r=s(2112),l=s(2537),a=s(7446),d=s(3049),h=s(1822),c=s(7448),p=s(1799),m=s(5055),u=s(7449),S=s(12);class g extends i.PureComponent{constructor(e){super(e),this.state={dropdownOpen:!1,isHovered:!1},this.store=(0,h.getStore)("HistorySidebarStore"),this.handleToggleGroup=this.handleToggleGroup.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddRequestToCollectionClick=this.handleAddRequestToCollectionClick.bind(this),this.handleRemoveRequest=this.handleRemoveRequest.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this)}handleMouseEnter(){this.setState({isHovered:!0})}handleMouseLeave(){!this.state.dropdownOpen&&this.setState({isHovered:!1})}getCollapseButtonClasses(){return n()({caret:!0,"pm-icon":!0,"pm-icon-normal":!0,"is-closed":this.store.isItemCollapsed(this.props.name)})}getMetaClasses(){return n()({"history-sidebar-list-item-group__meta":!0,"is-hovered":this.state.dropdownOpen})}handleToggleGroup(){const{name:e}=this.props;if(this.store.isItemCollapsed(e))return this.store.expandItem(e);this.store.collapseItem(e)}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){const t={requests:S.reduce(this.props.items,((e,t)=>("request"===t.type&&e.push(t.id),e)),[]),runs:S.reduce(this.props.items,((e,t)=>("collectionrun"===t.type&&e.push(t.id),e)),[]),websockethistory:S.reduce(this.props.items,((e,t)=>("websockethistory"===t.type&&e.push(t.id),e)),[]),ecitemhistory:S.reduce(this.props.items,((e,t)=>("ecitemhistory"===t.type&&e.push(t.id),e)),[]),defaultCollectionName:this.props.name,from:"history_date_group"};e!==a.ACTION_TYPE_DELETE?this.props.onSelectAction(e,t):pm.mediator.trigger("showDeleteHistoryModal",(()=>{this.props.onSelectAction(e,t)}),{identifier:"selected"})}handleAddRequestToCollectionClick(e){if(e.stopPropagation(),p.default.isEnabled)return pm.mediator.trigger("showSignInModal",{type:"save",origin:"save_shortcut",subtitle:m.HISTORY_SIGNIN_MODAL_SUBTITLE});this.handleDropdownActionSelect(a.ACTION_TYPE_SAVE)}handleRemoveRequest(e){e.stopPropagation(),this.handleDropdownActionSelect(a.ACTION_TYPE_DELETE)}render(){const e=S.size(this.store.getSelectedItems())>1,{userCanSave:t}=(0,h.getStore)("OnlineStatusStore");return i.createElement("div",{className:"history-sidebar-list-item-group",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.createElement("div",{className:this.getMetaClasses(),onClick:this.handleToggleGroup},i.createElement("div",{className:"history-sidebar-list-item-group__name"},i.createElement(r.default,{name:"icon-direction-down",className:this.getCollapseButtonClasses()}),i.createElement("span",null,this.props.name)),!e&&this.state.isHovered&&i.createElement("div",{className:"history-sidebar-list-item-group__actions"},i.createElement(l.Button,{className:"history-sidebar-list-item__button__add",type:"icon",disabled:!t||this.props.disableRequestSpecificActions,onClick:this.handleAddRequestToCollectionClick,tooltip:t?this.props.disableRequestSpecificActions?"Not available to collection run items":c.ACTION_TYPE_SAVE_REQUESTS_TOOLTIP:d.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement(r.default,{name:"icon-action-add-stroke",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),i.createElement(l.Button,{className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleRemoveRequest,disabled:!t,tooltip:t?c.ACTION_TYPE_DELETE_REQUESTS_TOOLTIP:d.DISABLED_TOOLTIP_IS_OFFLINE},i.createElement(r.default,{name:"icon-action-delete-stroke",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})),!p.default.isEnabled&&i.createElement(u.default,{count:S.size(this.props.items),onSelect:this.handleDropdownActionSelect,onToggle:this.handleDropdownToggle,disableRequestSpecificActions:this.props.disableRequestSpecificActions}))))}}},7445:function(e,t,s){s.r(t);var i=s(1),o=s(4),n=s(2885),r=s.n(n),l=s(2792),a=s(2584),d=s(7446),h=s(1822),c=s(3972),p=s(7447),m=s(7450),u=s(1821),S=s(12);const g=(0,u.c)(class extends i.Component{constructor(e){super(e),this.store=(0,h.getStore)("HistorySidebarStore"),this.historyStore=(0,h.getStore)("HistoryStore"),this.focus=this.focus.bind(this),this.groupItems=this.groupItems.bind(this),this.selectNext=this.selectNext.bind(this),this.selectPrev=this.selectPrev.bind(this),this.deleteItem=this.deleteItem.bind(this),this.selectItem=this.selectItem.bind(this),this.multiselectNextItem=this.multiselectNextItem.bind(this),this.multiselectPrevItem=this.multiselectPrevItem.bind(this)}getKeyMapHandlers(){return{groupItems:pm.shortcuts.handle("groupItems",this.groupItems),nextItem:pm.shortcuts.handle("nextItem",this.selectNext),prevItem:pm.shortcuts.handle("prevItem",this.selectPrev),delete:pm.shortcuts.handle("delete",this.deleteItem),multiselectNextItem:pm.shortcuts.handle("multiselectNextItem",this.multiselectNextItem),multiselectPrevItem:pm.shortcuts.handle("multiselectPrevtItem",this.multiselectPrevItem),select:pm.shortcuts.handle("select",this.selectItem),search:pm.shortcuts.handle("search")}}focus(){const e=(0,o.findDOMNode)(this.refs.history);e&&e.focus()}selectNext(e){e&&e.preventDefault();const t=this.store.getNextItem();t&&S.invoke(this,"props.onSelect",t)}selectPrev(e){e&&e.preventDefault();const t=this.store.getPrevItem();t&&S.invoke(this,"props.onSelect",t)}deleteItem(e){if(document.activeElement.classList.contains("history-sidebar__filter"))return;e&&e.preventDefault();const t=this.store.getPrevItem();S.invoke(this,"props.onDeleteMultiple","selected",t)}selectItem(e){e&&e.preventDefault(),S.invoke(this,"refs.list.selectItem")}multiselectNextItem(e){e&&e.preventDefault();const t=this.store.getNextItem();t&&S.invoke(this,"props.onSelect",t,{metaKey:!0})}multiselectPrevItem(e){e&&e.preventDefault();const t=this.store.getPrevItem();t&&S.invoke(this,"props.onSelect",t,{metaKey:!0})}groupItems(){this.props.onSelectAction&&this.props.onSelectAction("all",d.ACTION_TYPE_SAVE,{requests:this.store.getSelectedItems(),from:"history_multiple"})}render(){return i.createElement(i.Fragment,null,i.createElement(l.default,{handlers:this.getKeyMapHandlers(),keyMap:pm.shortcuts.getShortcuts()},i.createElement("div",{className:"history-sidebar",ref:"history"},i.createElement("div",{className:"history-sidebar-wrapper"},i.createElement(p.default,{historySidebar:this.store,historyStore:this.historyStore,enableHistoryResponseSaving:this.props.enableHistoryResponseSaving,onDeleteMultiple:this.props.onDeleteMultiple,onSelectAction:this.props.onSelectAction.bind(this,"all"),onToggleHistoryResponseSaving:this.props.onToggleHistoryResponseSaving}),i.createElement(a.default,{identifier:"history"},i.createElement(m.default,{ref:"list",initializing:this.props.initializing,isSocketConnected:this.props.isSocketConnected,isLoggedIn:this.props.isLoggedIn,workspace:this.props.workspace,onDeleteMultiple:this.props.onDeleteMultiple,onLoadMore:this.props.onLoadMore,onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction}))))),i.createElement(c.HistoryAd,null))}},[r()]);t.default=g},7444:function(e,t,s){s.r(t);var i=s(1),o=s(2539),n=s.n(o),r=s(2098),l=s(1822),a=s(1643),d=s(1706),h=s(7445),c=s(1959),p=s(5606),m=s(2091),u=s(1715),S=s(1935),g=s(3704),T=s(3048),b=s(2090),E=s(7446),y=s(7441),_=s(4198),f=s(4571),I=s(1821),v=s(12);const A=(0,I.c)(class extends i.Component{constructor(e){super(e),this.closeHistoryItemTabs=e=>{if(null==e||!e.length)return;const t=e.map((e=>this.findHistoryItemVisibleTabId(e)));(null==t?void 0:t.length)&&S.default.closeMultiple(t)},this.findHistoryItemVisibleTabId=e=>{const t=(0,l.getStore)("ActiveWorkspaceSessionStore").visibleEditors;if(null!=t&&t.length)return t.find((t=>{var s,i;const o=m.default.getRouteConfigForTab(t);return((0,u.decomposeUID)(null==o||null===(s=o.routeParams)||void 0===s?void 0:s.hid).modelId||(null==o||null===(i=o.routeParams)||void 0===i?void 0:i.echid))===e}))},this.store=(0,l.getStore)("HistorySidebarStore"),this.focus=this.focus.bind(this),this.handleLoadRequestDebounced=v.debounce(this.handleLoadRequest,100,{leading:!0}).bind(this),this.handleLoadCollectionRunDebounced=v.debounce(this.handleLoadCollectionRun,100,{leading:!0}).bind(this),this.handleLoadWebSocketHistoryDebounced=v.debounce(this.handleLoadWebSocketHistory,100,{leading:!0}).bind(this),this.handleLoadECHistoryDebounced=v.debounce(this.handleLoadECHistory,100,{leading:!0}).bind(this),this.handleActiveRequestChange=this.handleActiveRequestChange.bind(this),this.handleAddToCollection=this.handleAddToCollection.bind(this),this.handleDeleteMultiple=this.handleDeleteMultiple.bind(this),this.handleItemSelect=this.handleItemSelect.bind(this),this.handleSelectAction=this.handleSelectAction.bind(this),this.handleSelectHistoryAction=this.handleSelectHistoryAction.bind(this),this.handleSelectCollectionRunAction=this.handleSelectCollectionRunAction.bind(this),this.handleSelectWebSocketHistoryAction=this.handleSelectWebSocketHistoryAction.bind(this)}UNSAFE_componentWillMount(){pm.mediator.on("activeRequestChanged",this.handleActiveRequestChange)}componentWillUnmount(){pm.mediator.off("activeRequestChanged",this.handleActiveRequestChange)}focus(){v.invoke(this,"refs.history.focus")}selectNext(){v.invoke(this,"refs.history.selectNext")}handleActiveRequestChange(e){this.store.itemExists(e)?this.store.resetSelection([e]):this.store.resetSelection()}handleClickOutside(e){if(!v.isEmpty(this.store.getSelectedItems())){const t=document.getElementsByClassName("ReactModal__Content")[0],s=document.querySelector(".history-sidebar-multiple-request-selected-dropdown");if(t&&t.contains(e.target)||s&&s.contains(e.target))return;this.store.resetSelection()}}handleLoadRequest(e,t=!1){e&&c.default.openHistoryInTab(e,{newTab:t,preview:!0})}handleLoadCollectionRun(e,t=!1){if(!e)return;const{uid:s}=(0,l.getStore)("RunnerRunStore").find(e)||{};(0,g.openRunInTab)(s,{newTab:t,preview:!t})}handleLoadWebSocketHistory(e,t=!1,s){e&&("socket.io"===s?(0,y.openSocketIOHistoryTab)(e,{forceNew:t,preview:!t}):(0,y.openWebSocketHistoryTab)(e,{forceNew:t,preview:!t}))}handleLoadECHistory(e,t,s=!1){if(!e)return;const i=pm.ECItemRegistry.getSDK(t);i&&i.openHistoryTab(e,{forceNew:s,preview:!s})}handleItemSelect({id:e,type:t,itemType:s},i={}){const o=v.includes(navigator.platform,"Mac");i.shiftKey&&(o?i.metaKey:i.ctrlKey)?("collectionrun"===t?this.handleLoadCollectionRunDebounced(e,!0):"websockethistory"===t?this.handleLoadWebSocketHistoryDebounced(e,!0,s):"ecitemhistory"===t?this.handleLoadECHistoryDebounced(e,s,!0):this.handleLoadRequestDebounced(e,!0),pm.mediator.trigger("focusSidebar")):i.ctrlKey||i.metaKey?this.store.isItemSelected(e)?this.store.unselectItem(e):this.store.selectItem(e):("collectionrun"===t?this.handleLoadCollectionRunDebounced(e,!1):"websockethistory"===t?this.handleLoadWebSocketHistoryDebounced(e,!1,s):"ecitemhistory"===t?this.handleLoadECHistoryDebounced(e,s,!1):this.handleLoadRequestDebounced(e,!1),pm.mediator.trigger("focusSidebar"),this.store.resetSelection([e]))}handleAddToCollection(e={}){const{requests:t}=e,s=v.isEmpty(t)?this.store.getSelectedItems():t;v.isEmpty(s)||c.default.convertHistoryToRequests(s).then((t=>{1===v.size(t)?t[0]&&pm.mediator.trigger("showAddToCollectionModal",t[0],{from:e.from}):pm.mediator.trigger("addRequestsToCollection",t,e)}))}handleToggleHistoryResponseSaving(){if(!(0,b.isWorkspaceMember)())return(0,b.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,b.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:"history_save_response"});const e=(0,l.getStore)("ActiveWorkspaceStore").settings,t={enableHistoryResponseSaving:!(e&&e.enableHistoryResponseSaving)};return(0,d.default)((0,a.createEvent)("updateSettings","workspace",{id:(0,l.getStore)("ActiveWorkspaceStore").id,settings:t})).catch((e=>{const t=e.isFriendly?e.message:"Could not update workspace settings";pm.toasts.error(t,{dedupeId:"ws-settings-error"})}))}resetHistorySelection(e){e&&e.id?this.store.resetSelection([e.id]):this.store.resetSelection()}handleDeleteMultiple(e,t){const s=(0,l.getStore)("PermissionStore"),i=(0,l.getStore)("RunnerRunStore");return(0,b.isWorkspaceMember)()?(0,l.getStore)("OnlineStatusStore").userCanSave?Promise.resolve().then((()=>{if("all"===e){var t;const e=(0,l.getStore)("ActiveWorkspaceStore").id;(0,d.default)((0,a.createEvent)("deleteAllInWorkspace","history",e)),i.deleteRun(v.map(i.values,(e=>e.id))),f.default.deleteAllHistory(e);const s=null===(t=this.store.getVisibleItems())||void 0===t?void 0:t.map((e=>e.id));this.closeHistoryItemTabs(s),(0,y.deleteWebSocketHistory)()}else if("selected"===e){s.can("delete","history")?(0,d.default)((0,a.createEvent)("deleteMultiple","history",{ids:this.store.getSelectedItems()},null,null)):pm.toasts.error("You do not have permissions to delete history."),s.can("delete","collectionrun")?(0,l.getStore)("RunnerRunStore").deleteRun(this.store.getSelectedItems()):pm.toasts.error("You do not have permissions to delete collection runs.");const e=(0,l.getStore)("ActiveWorkspaceStore").id,t=this.store.getSelectedItems(),i=new Set;v.forEach(this.store.historyItems,(e=>{"ecitemhistory"===(null==e?void 0:e.type)&&i.add(e.id)}));const o=v.filter(t,(e=>i.has(e)));f.default.deleteManyHistory(e,o),this.closeHistoryItemTabs(this.store.getSelectedItems()),(0,y.deleteWebSocketHistory)(this.store.getSelectedItems())}})).then((()=>{this.resetHistorySelection(t)})).catch((()=>{this.resetHistorySelection(t)})):(0,T.showOfflineActionDisabledToast)():(0,b.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,b.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:"history_delete_multiple"})}handleAddRequestToService(e,t){const{requests:s,defaultCollectionName:i="",from:o=""}=e,n=v.isEmpty(s)?this.store.getSelectedItems():s;v.isEmpty(n)||c.default.convertHistoryToRequests(n).then((e=>{if(!v.isEmpty(e)){const s={name:i,from:o};p.default.create(t,{requests:e,opts:s},null,{from:"history_sidebar"})}}))}handleSelectHistoryAction(e,t){switch(e){case E.ACTION_TYPE_SAVE:if(!(0,l.getStore)("OnlineStatusStore").userCanSave)return(0,T.showOfflineActionDisabledToast)();this.handleAddToCollection(t);break;case E.ACTION_TYPE_MONITOR:this.handleAddRequestToService(t,"openCreateNewMonitorModal");break;case E.ACTION_TYPE_DOCUMENT:this.handleAddRequestToService(t,"openCreateNewDocumentationModal");break;case E.ACTION_TYPE_MOCK:this.handleAddRequestToService(t,"openCreateNewMockModal");break;case E.ACTION_TYPE_DELETE:if(!(0,l.getStore)("OnlineStatusStore").userCanSave)return(0,T.showOfflineActionDisabledToast)();(0,d.default)((0,a.createEvent)("deleteMultiple","history",{ids:t.requests},null,null)),this.closeHistoryItemTabs(t.requests)}}handleSelectCollectionRunAction(e,t){switch(e){case E.ACTION_TYPE_DELETE:if(!(0,l.getStore)("OnlineStatusStore").userCanSave)return(0,T.showOfflineActionDisabledToast)();(0,l.getStore)("RunnerRunStore").deleteRun(t.runs);break;case E.ACTION_TYPE_DOWNLOAD:return(0,_.exportRuns)(t.runs);default:pm.logger.warn(`HistorySidebarContainer~handleSelectCollectionRunAction: ${e} - action not handled`)}}handleSelectWebSocketHistoryAction(e,t){if(e===E.ACTION_TYPE_DELETE){if(!(0,l.getStore)("OnlineStatusStore").userCanSave)return(0,T.showOfflineActionDisabledToast)();(0,y.deleteWebSocketHistory)(t.websockethistory)}}handleSelectECHistoryAction(e,t){if(e===E.ACTION_TYPE_DELETE){if(!(0,l.getStore)("OnlineStatusStore").userCanSave)return(0,T.showOfflineActionDisabledToast)();f.default.deleteManyHistory((0,l.getStore)("ActiveWorkspaceStore").id,t.ecitemhistory),this.closeHistoryItemTabs(t.ecitemhistory)}}handleSelectAction(e,t,s){return(0,b.isWorkspaceMember)()?"collectionrun"===e?(1===v.size(s.runs)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.runs[0]),s.runs&&this.handleSelectCollectionRunAction(t,s)):"websockethistory"===e?(1===v.size(s.websockethistory)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.websockethistory[0]),s.websockethistory&&this.handleSelectWebSocketHistoryAction(t,s)):"ecitemhistory"===e?(1===v.size(s.ecitemhistory)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.ecitemhistory[0]),s.ecitemhistory&&this.handleSelectECHistoryAction(t,s)):"request"===e?(1===v.size(s.requests)&&t===E.ACTION_TYPE_DELETE&&this.store.unselectItem(s.requests[0]),this.handleSelectHistoryAction(t,s)):void("all"===e&&(s.runs&&this.handleSelectCollectionRunAction(t,s),s.requests&&this.handleSelectHistoryAction(t,s),s.websockethistory&&this.handleSelectWebSocketHistoryAction(t,s),s.ecitemhistory&&this.handleSelectECHistoryAction(t,s))):(0,b.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,b.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"history",origin:`history_${t}`})}render(){const e=(0,l.getStore)("ActiveWorkspaceStore").settings,t=(0,l.getStore)("SyncStatusStore"),s=(0,l.getStore)("CurrentUserStore"),o=(0,l.getStore)("HistoryStore"),n=(0,l.getStore)("ActiveWorkspaceStore"),r=e&&e.enableHistoryResponseSaving;return i.createElement(h.default,{store:this.store,enableHistoryResponseSaving:r,initializing:s.isHydrating||o.isHydrating||!n.id,isLoggedIn:s.isLoggedIn,isSocketConnected:t.isSocketConnected,workspace:n.id,onSelectAction:this.handleSelectAction,onDeleteMultiple:this.handleDeleteMultiple,onSelect:this.handleItemSelect,onToggleHistoryResponseSaving:this.handleToggleHistoryResponseSaving,ref:"history"})}},[r.observer,n()]);t.default=A},7458:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var i=s(1),o=s(2537);function n(e){return i.createElement("div",{className:"history-sidebar-list-error"},i.createElement("h4",null,"Couldn't load history"),i.createElement("p",null,"Something went wrong while trying to load history items. Check your internet and try again."),i.createElement(o.Button,{type:"secondary",onClick:e.onRetry},"Retry"))}},7450:function(e,t,s){s.r(t);var i=s(1),o=s(2098),n=s(2875),r=s(4612),l=s(2800),a=s(5647),d=s(2112),h=s(2537),c=s(4192),p=s(1822),m=s(7451),u=s(7453),S=s(6662),g=s(7454),T=s(7455),b=s(7456),E=s(7457),y=s(7458),_=s(5614),f=s(7459),I=s(1821),v=s(12);function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)({}).hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},A.apply(null,arguments)}const C=(0,I.c)(class extends i.Component{constructor(e){super(e),this.store=(0,p.getStore)("HistorySidebarStore"),this.requesterSidebarStore=(0,p.getStore)("RequesterSidebarStore"),this.handleToggleGroup=this.handleToggleGroup.bind(this),this.getListItem=this.getListItem.bind(this),this.getItemSize=this.getItemSize.bind(this),this.handleClearCachedHeight=this.handleClearCachedHeight.bind(this),this.observeSizeChange=this.observeSizeChange.bind(this),this.unobserveSizeChange=this.unobserveSizeChange.bind(this),this.handleItemsRender=this.handleItemsRender.bind(this),this.handleItemsRenderDebounced=v.debounce(this.handleItemsRender,1e3),this.handleListScroll=this.handleListScroll.bind(this),this.handleListScrollDebounced=v.debounce(this.handleListScroll,300),this.handleJumpToTop=this.handleJumpToTop.bind(this),this.handleRefresh=this.handleRefresh.bind(this),this.heightSet={},this.resizeObserver=new ResizeObserver((e=>{for(const t of e){if(!(t&&t.target&&t.target.dataset))return;const{index:e}=t.target.dataset;this.heightSet[e]=t.target.offsetHeight}this.handleClearCachedHeight(0)}))}componentDidMount(){this.props.initializing||this.store.load()}componentDidUpdate(e){this.props.initializing||(e.initializing?this.store.load():(this.props.workspace!==e.workspace||this.props.isLoggedIn&&!e.isLoggedIn)&&(this.store.load(),this.listRef&&this.listRef.scrollTo(0),this.store.setScrollOffset(0)))}observeSizeChange(e){this.resizeObserver&&this.resizeObserver.observe(e)}unobserveSizeChange(e,t){this.resizeObserver&&this.resizeObserver.unobserve(e),delete this.heightSet[t]}handleClearCachedHeight(e){this.listRef.resetAfterIndex(e)}handleToggleGroup(e){if(this.store.isItemCollapsed(e))return this.store.expandItem(e);this.store.collapseItem(e)}getItemSize(e){const t=v.get(this.store,["historyItems",e]);return"meta"===t.type||"error"===t.type?28:this.heightSet[e]||28}getListItem(e){const t=v.get(this.store,["historyItems",e.index]);return t?"loading"===t.type?i.createElement("div",{className:"history-list__loading",style:e.style,key:t.key},i.createElement(l.default,null)):"error"===t.type?i.createElement("div",{className:"history-list__error",style:e.style},i.createElement(b.default,{key:t.name,onRetry:()=>"load-error"===t.key?this.store.load(!0):"load-more-error"===t.key?this.store.loadMore():void 0})):"meta"===t.type?i.createElement("div",{className:"history-list__meta",style:e.style},i.createElement(T.default,{name:t.name,key:t.name,onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"all"),items:t.items,disableRequestSpecificActions:t.disableRequestSpecificActions})):"collectionrun"===t.type?i.createElement("div",{className:"history-list__collection-run",style:e.style},i.createElement(E.default,A({},t,{name:t.name,hideActions:v.size(this.store.getSelectedItems())>1,key:t.id,selected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"collectionrun"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,index:e.index}))):"websockethistory"===t.type?i.createElement("div",{className:"history-list__websocket",style:e.style},i.createElement(u.default,A({},t,{key:t.id,isSelected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"websockethistory"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,index:e.index}))):"ecitemhistory"===t.type?i.createElement("div",{className:"history-list__extensibleitem",style:e.style},i.createElement(f.default,A({},t,{key:t.id,isSelected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,t.type),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,index:e.index}))):i.createElement("div",{className:"history-list__item",style:e.style},i.createElement(g.default,A({},t,{hideActions:v.size(this.store.getSelectedItems())>1,key:t.id,selected:this.store.isItemSelected(t.id),onSelect:this.props.onSelect,onSelectAction:this.props.onSelectAction.bind(this,"request"),observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,viewLargeBody:this.props.viewLargeBody,index:e.index}))):null}getNotification(){return this.store.showReloadNotification?i.createElement("div",{className:"history-sidebar-list__notification"},i.createElement(h.Button,{type:"primary",size:"small",className:"history-sidebar-list__refresh",onClick:this.handleRefresh},i.createElement(d.default,{name:"icon-action-refresh-stroke",color:"content-color-primary",size:"small",className:"pm-icon"}),"Refresh")):this.store.newHistoryIds.size?i.createElement("div",{className:"history-sidebar-list__notification"},i.createElement(h.Button,{type:"primary",size:"small",className:"history-sidebar-list__more-on-top",onClick:this.handleJumpToTop},i.createElement(d.default,{name:"icon-direction-up",color:"content-color-primary",size:"small",className:"pm-icon"}),i.createElement("span",null,this.store.newHistoryIds.size," ","new"," ",c.default.pluralize({count:this.store.newHistoryIds.size,singular:"item",plural:"items"})))):null}handleListScroll({scrollOffset:e}){0===e&&this.store.newHistoryIds.size&&this.store.showNewHistory(),this.store.setScrollOffset(e)}handleItemsRender(e){this.store.scrolledToEnd||this.store.loadingMore||this.requesterSidebarStore.query||e.overscanStopIndex===e.visibleStopIndex&&this.store.loadMore()}handleJumpToTop(){this.listRef&&this.listRef.scrollTo(0)}handleRefresh(){this.listRef&&this.listRef.scrollTo(0),this.store.load(!0)}render(){const e=e=>i.createElement(o.Observer,null,this.getListItem.bind(this,e)),t=({height:t,width:s})=>i.createElement(o.Observer,null,(()=>i.createElement(n.VariableSizeList,{height:t,itemCount:this.store.historyItems.length,itemSize:this.getItemSize,width:s,ref:e=>{this.listRef=e},overscanCount:10,onItemsRendered:this.handleItemsRenderDebounced,onScroll:this.handleListScrollDebounced},e)));return v.isEmpty(this.store.historyItems)?this.props.initializing||this.store.loading?i.createElement("div",{className:"history-sidebar-list"},i.createElement(_.default,{hasHierarchy:!0})):this.store.loadError?"You don't have permission to view history in this workspace"===this.store.loadError.message?i.createElement("div",{className:"history-sidebar-list-permission-error"},i.createElement(S.default,{illustration:i.createElement(a.default,null),title:"You don't have permission to view history",message:"Only team members can view history of this workspace"})):i.createElement("div",{className:"history-sidebar-list"},i.createElement(y.default,{onRetry:()=>this.store.load(!0)})):i.createElement("div",{className:"history-sidebar-list"},i.createElement(m.default,{query:this.store.searchQuery})):i.createElement("div",{className:"history-sidebar-list",ref:"history"},this.getNotification(),i.createElement(r.default,null,t))}},[o.observer]);t.default=C},7451:function(e,t,s){s.r(t);var i=s(1),o=s(2098),n=s(7452),r=s(3067),l=s(1816),a=s(6662),d=s(6663),h=s(1799),c=s(1821);const p=(0,c.c)(class extends i.Component{constructor(e){super(e),this.handleShowMeHow=this.handleShowMeHow.bind(this)}handleShowMeHow(){(0,l.openExternalLink)(r.SEND_FIRST_REQUEST_DOCS,"_blank")}render(){const e=h.default.isEnabled;return this.props.query?i.createElement(d.default,{searchQuery:this.props.query,illustration:i.createElement(n.default,null)}):i.createElement(a.default,{illustration:i.createElement(n.default,null),title:e?"Time to send your first request":"You haven't sent any requests.",message:e?"All the requests you send will be stored in History. Sign in or create an account to organize them in collections.":"Any request you send in this workspace will appear here.",action:{label:"Show me how",handler:this.handleShowMeHow}})}},[o.observer]);t.default=p},7447:function(e,t,s){s.r(t);var i=s(1),o=s(2102),n=s.n(o),r=s(2098),l=s(2802),a=s(2112),d=s(2537),h=s(3959),c=s(2884),p=s(2538),m=s(3048),u=s(7446),S=s(4198),g=s(1822),T=s(6675),b=s(1799),E=s(5055),y=s(7448),_=s(7449),f=s(1821),I=s(12);const v=(0,f.c)(class extends i.Component{constructor(e){super(e),this.state={dropdownOpen:!1,showResponseToggleTooltip:!1},this.handleDeleteClick=this.handleDeleteClick.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleDropdownActionSelect=this.handleDropdownActionSelect.bind(this),this.handleAddToCollectionClick=this.handleAddToCollectionClick.bind(this),this.handleDeleteSelected=this.handleDeleteSelected.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this),this.handleActionsDropdownSelect=this.handleActionsDropdownSelect.bind(this),this.handleSaveResponseToggle=this.handleSaveResponseToggle.bind(this),this.showResponseToggleTooltip=this.showResponseToggleTooltip.bind(this),this.hideResponseToggleTooltip=this.hideResponseToggleTooltip.bind(this),this.disableRequestItemOptions=this.disableRequestItemOptions.bind(this)}handleAddToCollectionClick(e){if(e.stopPropagation(),b.default.isEnabled)return pm.mediator.trigger("showSignInModal",{type:"save",origin:"save_shortcut",subtitle:E.HISTORY_SIGNIN_MODAL_SUBTITLE});this.props.onSelectAction(u.ACTION_TYPE_SAVE,{requests:this.props.historySidebar.getSelectedItems(),from:"history_multiple"})}handleDeleteClick(){pm.mediator.trigger("showDeleteHistoryModal",(async()=>{try{this.props.onDeleteMultiple&&await this.props.onDeleteMultiple("all")}catch(e){pm.logger.error("Could not delete history",e),pm.toasts.error("Could not delete history")}}),{identifier:"all"})}handleDropdownToggle(e){e!==this.state.dropdownOpen&&this.setState({dropdownOpen:e})}handleDropdownActionSelect(e){return e===u.ACTION_TYPE_DELETE?(0,g.getStore)("OnlineStatusStore").userCanSave?void pm.mediator.trigger("showDeleteHistoryModal",(()=>{this.props.onDeleteMultiple("selected")}),{identifier:"selected"}):(0,m.showOfflineActionDisabledToast)():e===u.ACTION_TYPE_DOWNLOAD?(0,S.exportRuns)(this.props.historySidebar.getSelectedItems()):void this.props.onSelectAction(e,{requests:this.props.historySidebar.getSelectedItems(),from:"history_multiple"})}handleActionsDropdownSelect(e){if("history-sidebar--clear-all"===e)this.handleDeleteClick()}handleDeleteSelected(){this.handleDropdownActionSelect(u.ACTION_TYPE_DELETE)}disableRequestItemOptions(){const e=I.filter(this.props.historySidebar.historyItems,(e=>this.props.historySidebar.selectedItems.has(e.id)&&"request"===e.type));return I.isEmpty(e)}showResponseToggleTooltip(){this.setState({showResponseToggleTooltip:!0})}hideResponseToggleTooltip(){this.setState({showResponseToggleTooltip:!1})}handleSaveResponseToggle(e){e&&e.stopPropagation(),this.props.onToggleHistoryResponseSaving&&this.props.onToggleHistoryResponseSaving()}handleSearchChange(e){this.props.historySidebar.setSearchQuery(e)}getToggleSaveResponseClasses(e){return n()({"dropdown-menu-item history-sidebar-menu__actions-save-response-toggle":!0,"is-disabled":e})}render(){const e=this.props.historySidebar.selectedItems.size,{isLoggedIn:t}=(0,g.getStore)("CurrentUserStore"),{isOffline:s,userCanSave:o}=(0,g.getStore)("OnlineStatusStore"),n=s&&t,r=!(0,g.getStore)("PermissionStore").can("editMeta","workspace",(0,g.getStore)("ActiveWorkspaceStore").id);return e>1?i.createElement("div",{className:"history-sidebar-menu multiple-request-selected"},i.createElement("div",{className:"history-sidebar-menu__left"},i.createElement(l.default,{type:"body-small",color:"content-color-primary"},e," ","items selected")),i.createElement("div",{className:"history-sidebar-menu__right"},i.createElement("div",{className:"history-sidebar-menu__actions-delete-history-wrapper"},i.createElement(d.Button,{disabled:!o,className:"history-sidebar-list-item__button__add",type:"icon",onClick:this.handleAddToCollectionClick,tooltip:y.ACTION_TYPE_SAVE_REQUESTS_TOOLTIP},i.createElement(a.default,{name:"icon-action-add-stroke",size:"large",className:"history-sidebar-list-item__actions__add pm-icon pm-icon-normal"})),i.createElement(d.Button,{disabled:!o,className:"history-sidebar-list-item__button__delete",type:"icon",onClick:this.handleDeleteSelected,tooltip:y.ACTION_TYPE_DELETE_REQUESTS_TOOLTIP},i.createElement(a.default,{name:"icon-action-delete-stroke",size:"large",className:"history-sidebar-list-item__actions__delete pm-icon pm-icon-normal"})),!b.default.isEnabled&&i.createElement(_.default,{count:e,onSelect:this.handleDropdownActionSelect,onToggle:this.handleDropdownToggle,disableRequestSpecificActions:this.disableRequestItemOptions()})))):i.createElement("div",{className:"history-sidebar-menu"},i.createElement(T.default,{className:"history-sidebar__filter",onSearch:this.handleSearchChange,onActionsDropdownSelect:this.handleActionsDropdownSelect,searchQuery:this.props.historySidebar.searchQuery,moreActions:i.createElement(c.DropdownMenu,{className:"history-sidebar__header-actions-dropdown--menu"},!I.isEmpty(this.props.historySidebar.historyItems)&&i.createElement(c.MenuItem,{className:"history-sidebar__header-actions-dropdown--menu-item history-sidebar-menu__actions-delete-history-wrapper",key:"history-sidebar--clear-all",refKey:"history-sidebar--clear-all",disabled:n,disabledText:"You need to be online to clear history."},i.createElement("span",null,"Clear all")),i.createElement("div",{className:this.getToggleSaveResponseClasses(r),onClick:r?void 0:this.handleSaveResponseToggle,ref:e=>{this.saveResponseToggleContainerRef=e},onMouseEnter:this.showResponseToggleTooltip,onMouseLeave:this.hideResponseToggleTooltip},"Save Responses",i.createElement(h.default,{isActive:this.props.enableHistoryResponseSaving,activeLabel:"",inactiveLabel:""}),i.createElement(p.Tooltip,{className:"history-sidebar-menu--save-response__tooltip",show:this.state.showResponseToggleTooltip,target:this.saveResponseToggleContainerRef},i.createElement(p.TooltipBody,null,r?"You don’t have permission to take this action.":"When turned off, the response headers and body won't be saved, though the response code, time, size, and language will be saved for reporting purposes."))))}))}},[r.observer]);t.default=v},7453:function(e,t,s){s.r(t);var i=s(1),o=s(4),n=s(2083),r=s.n(n),l=s(2102),a=s.n(l),d=s(2802),h=s(3060),c=s(2112),p=s(2411),m=s(2397),u=s(2098),S=s(4194),g=s(2538),T=s(6694),b=s(1822),E=s(7446),y=s(3049),_=s(1821);const f=(0,_.c)(class extends i.Component{constructor(e){super(e),this.state={isTooltipVisible:!1},this.userAvatar=i.createRef(),this.handleSelect=this.handleSelect.bind(this),this.handleAction=this.handleAction.bind(this),this.handleDelete=this.handleDelete.bind(this),this.showTooltip=this.showTooltip.bind(this),this.hideTooltip=this.hideTooltip.bind(this),this.getLeftAlignedComponents=this.getLeftAlignedComponents.bind(this),this.getRightAlignedComponents=this.getRightAlignedComponents.bind(this)}componentDidMount(){this.selfNode=(0,o.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUpdate(e){if(!this.props.selected&&e.selected){const e=(0,o.findDOMNode)(this);e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()}}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}getClasses(){return a()({"history-sidebar-list-item":!0,"history-sidebar-list-item__websocket-history":!0,"is-selected":this.props.selected})}getTooltipText(e,t){return e?t?y.DISABLED_TOOLTIP_IS_OFFLINE:y.DISABLED_TOOLTIP_NO_PERMISSION:"Delete history"}getLeftAlignedComponents(e){if(!e)return i.createElement("div",{className:"history-sidebar__indent"});const t=a()({"history-sidebar-list-item-updatedBy":!0,hovered:e}),s=(0,b.getStore)("CurrentUserStore").teamMembers.get(String(this.props.owner)),o=s&&(s.name||s.username);return i.createElement("div",{className:t,onMouseOver:this.showTooltip,onMouseLeave:this.hideTooltip},this.props.owner&&"0"!==this.props.owner?i.createElement(S.default,{ref:this.userAvatar,size:"small",userId:this.props.owner}):i.createElement(c.default,{name:"icon-descriptive-user-stroke",color:"content-color-secondary"}),this.userAvatar.current&&i.createElement(g.Tooltip,{immediate:!0,show:this.state.isTooltipVisible,target:this.userAvatar.current,placement:"right"},i.createElement(g.TooltipBody,null,i.createElement("div",{className:"history-sidebar-list-item-avatar-tooltip"},i.createElement(d.default,{type:"body-medium"},o),i.createElement(d.default,{type:"body-medium"},r()(this.props.createdAt).format("DD MMM YYYY, h:mm A"))))))}getRightAlignedComponents(e){const t=a()({"sidebar-list-item__right-section-actions":!0,hovered:e});if(!e)return null;const s=(0,b.getStore)("PermissionStore"),{userCanSave:o}=(0,b.getStore)("OnlineStatusStore"),n=o&&s.can("delete","history");return i.createElement("div",{className:t},i.createElement(h.default,{type:"tertiary",icon:"icon-action-delete-stroke",onClick:this.handleDelete,isDisabled:!n,tooltip:this.getTooltipText(!n,!o)}))}showTooltip(){this.setState({isTooltipVisible:!0})}hideTooltip(){this.setState({isTooltipVisible:!1})}handleSelect(e){e.stopPropagation();const t={ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};this.props.onSelect&&this.props.onSelect({id:this.props.id,type:"websockethistory",itemType:this.props.subprotocol},t)}handleAction(e){this.props.onSelectAction(e,{websockethistory:[this.props.id]})}handleDelete(e){e.stopPropagation(),this.handleAction(E.ACTION_TYPE_DELETE)}render(){let e=p.default;return"socket.io"===this.props.subprotocol&&(e=m.default),i.createElement("div",{"data-index":this.props.index},i.createElement(T.default,{text:this.props.url,icon:i.createElement(e,{color:"content-color-brand"}),isSelected:this.props.isSelected,onClick:this.handleSelect,className:this.getClasses(),leftMetaComponent:this.getLeftAlignedComponents,rightMetaComponent:this.getRightAlignedComponents}))}},[u.observer]);t.default=f},7452:function(e,t,s){s.r(t),s.d(t,{default:function(){return n}});var i=s(1),o=s(3052);function n(){return i.createElement(o.default,{name:"illustration-no-history"})}}}]);