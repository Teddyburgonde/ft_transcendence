"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[20],{7783:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var o,n=r(7784),i=r(1006),a=r(1822),s=r(1821);class c{constructor(){this.entityId=void 0,this.entityUid=void 0,this.entityType=void 0,this.owner=void 0,this.unsavedDescription=null,this.updateUnsavedDescription=e=>{this.unsavedDescription=e}}get store(){const e=(0,a.getStore)("ActiveWorkspaceSessionStore").activeEditor,t=(0,a.getStore)("EditorStore").find(e);if(t){const e=t.resource,r="v2implview://stubView/";if(e.startsWith(r)){const[t,o]=e.replace(r,"").split("/");return new n.default(t,o)}}return null}willDestroy(){this.codegen=void 0}get contextBarUnsavedDescription(){return this.unsavedDescription}}o=c,(0,s.n)(o.prototype,"store",[i.computed])},7786:function(e,t,r){r.r(t),r.d(t,{fetchAllTags:function(){return f},fetchCollectionExistenceInActiveWorkspace:function(){return m},fetchCustomDomains:function(){return N},fetchData:function(){return p},fetchPermissions:function(){return D},fetchPublishedData:function(){return E},fetchWorkspaces:function(){return S},joinWorkspace:function(){return g},publishDocumentation:function(){return O},unpublishDocumentation:function(){return I},updateData:function(){return h}});var o=r(7787),n=r.n(o),i=r(12),a=r.n(i),s=r(1731),c=r(4153),u=r(1706),d=r(1643),l=r(1822),T=r(5641);function p(e,t,r,o={}){let i=o.populate,a=o.format,u=o.versionTag||c.DOCUMENTATION_LATEST_VERSION_STRING,d=n().stringify({populate:i,format:a,versionTag:u,owner:r}),l=`/${e}/${t}?${d}`;return new Promise(((r,o)=>{s.default.request(l,{method:"get"}).then((n=>{let i=n&&n.status,a=n&&n.body;!i||i>=400&&i<600?(pm.logger.error(`Failed to fetch ${e}, with Id: ${t}`,i,a),o({error:new Error(`Failed to fetch ${e}, with Id: ${t}, status: ${i}`),status:i})):r(n)}))}))}function h(e,t,r){const o={namespace:e,name:c.DOCUMENTATION_UPDATE_ACTION.UPDATE,data:{id:t,...r}};return(0,u.default)(o)}function f(e){if(!e)return Promise.reject(new Error("DocumentationService~fetchAllTags: collectionUid not found"));let t=`/collections/${e}/versiontags?populate=apiVersion`;return s.default.request(t,{method:"get"}).then((e=>{let t=a().get(e,"body.data");return a().map(t,(e=>({id:a().get(e,"id"),name:a().get(e,"apiVersion.name")})))}))}function E(e){return s.default.request("/ws/proxy",{method:"post",data:{service:"documenter",method:"get",path:`/documentation?published=true&collectionUid=${e}`}}).then((t=>{let r=t&&t.status,o=t&&t.body;return!r||r>=400&&r<600?(pm.logger.error(`Failed to fetch published status of collection, with Id: ${e}`,r,o),Promise.reject({error:new Error(`Failed to fetch collection, with Id: ${e}, status: ${r}`),statusCode:r})):Promise.resolve(t)})).catch((t=>(pm.logger.error(`Failed to fetch published status of collection, with Id: ${e}`,500,t),Promise.reject({error:new Error(`Failed to fetch collection, with Id: ${e}, status: 500`),statusCode:500}))))}function N(){return s.default.request("/ws/proxy",{method:"post",data:{service:"documenter",method:"get",path:"/domains"}}).then((e=>Promise.resolve(e))).catch((e=>{let t=e.status||500;return pm.logger.error("Failed to fetch custom domains",t,e),Promise.reject({error:new Error(`Failed to fetch custom domains, status: ${t}`),statusCode:t})}))}function O(e){return s.default.request("/ws/proxy",{method:"post",data:{service:"documenter",method:"post",path:"/documentation",body:e}}).then((e=>{let t=e&&e.status;return!t||t>=400&&t<600?(pm.logger.error("Failed to publish collection",t,e.body),Promise.reject({error:new Error(`Failed to publish collection, status: ${t}`),statusCode:t})):Promise.resolve(e)})).catch((e=>{let t=e.status||500;return pm.logger.error("Failed to publish documentation",t,e),Promise.reject({error:new Error(`Failed to publish documentation, status: ${t}`),statusCode:t})}))}function I(e){return s.default.request("/ws/proxy",{method:"post",data:{service:"documenter",method:"delete",path:`/documentation?uid=${e}`}}).then((t=>{let r=t&&t.status;return!r||r>=400&&r<600?(pm.logger.error(`Failed to fetch published status of collection, with Id: ${e}`,r,t.body),Promise.reject({error:new Error(`Failed to fetch collection, with Id: ${e}, status: ${r}`),statusCode:r})):Promise.resolve(t)})).catch((e=>{let t=e.status||500;return pm.logger.error("Failed to unpublish documentation",t,e),Promise.reject({error:new Error(`Failed to unpublish documentation, status: ${t}`),statusCode:t})}))}async function m(e,t){try{let r=t&&t.workspaceId;t||(r=(0,l.getStore)("ActiveWorkspaceStore").id);let o=await async function(e){let t=(0,l.getStore)("WorkspaceStore").find(e);const r=a().get(t,["dependencies","collections"],[]);t&&0!==r.length||(t=await T.default.get({id:e},{populate:[]}));return t}(r);return Promise.resolve(a().includes(a().get(o,["dependencies","collections"]),e))}catch(e){return pm.logger.error("DocumentationService~fetchCollectionExistenceInActiveWorkspace",e),Promise.reject(new Error("DocumentationService~fetchCollectionExistenceInActiveWorkspace: An error occurred while fetching existence."))}}function D(e){return s.default.request("/ws/proxy",{method:"post",data:{path:"/api/permissions/check",service:"acs",method:"post",body:{checks:e}}}).then((({body:e})=>a().get(e,"results",{}))).catch((e=>(pm.logger.error("DocumentationService~fetchPermissions: Failed to fetch permissions for Documentation.",e),Promise.reject(e))))}async function S(){return await(0,l.getStore)("SyncStatusStore").onSyncAvailable(),T.default.getAll({dependencies:!0,groups:!0}).then((e=>e&&Array.isArray(e)?Promise.resolve(e):Promise.reject("Workspaces were not returned in the expected format."))).catch((e=>(pm.logger.error("ShareToWorkspace~fetchPublicWorkspaces: Failed to load public workspaces:",e),Promise.reject(e))))}function g(e){if(!e)return Promise.reject(new Error("DocumentationService~joinWorkspace: workspaceId not supplied"));let t=(0,d.createEvent)("join","workspace",{model:"workspace",workspace:{id:e}});return(0,u.default)(t).then((e=>Promise.resolve(e))).catch((t=>(pm.logger.error("DocumentationService~joinWorkspace: Failed to join workspace:",e,t),Promise.reject(t))))}},7784:function(e,t,r){r.r(t),r.d(t,{default:function(){return c}});var o,n=r(1006),i=r(4153),a=r(7785),s=r(1821);class c{constructor(e,t){this.entityType=e,this.entityUid=t,this.masterStore=a.default.getInstance()}get isOffline(){return this.masterStore.isOffline}get isEditable(){return this.masterStore.isEditable}get activeEnvironmentVariables(){return this.masterStore.activeEnvironmentVariables}get isUserMemberOfActiveWorkspace(){return this.masterStore.isUserMemberOfActiveWorkspace}get entityData(){let{data:e,status:t}=this.masterStore.getData({uid:this.entityUid,type:this.entityType,versionTag:i.DOCUMENTATION_LATEST_VERSION_STRING},{withPublishedData:!0});return{isLoading:t===i.DOCUMENTATION_STATUS.LOADING,error:t===i.DOCUMENTATION_STATUS.ERROR,data:e}}get parentCollectionData(){const{data:e}=this.entityData;if(this.entityType===i.DOCUMENTATION_ENTITY.COLLECTION)return e;if(!e)return;const t=`${e.owner}-${e.collection}`;return this.masterStore.getData({uid:t,type:i.DOCUMENTATION_ENTITY.COLLECTION,versionTag:i.DOCUMENTATION_LATEST_VERSION_STRING}).data}updateDescription(e){this.masterStore.updateDescription({type:this.entityType,uid:this.entityUid},e)}}o=c,c.masterStoreGetMethod={[i.DOCUMENTATION_ENTITY.COLLECTION]:"getCollection",[i.DOCUMENTATION_ENTITY.FOLDER]:"getFolder",[i.DOCUMENTATION_ENTITY.REQUEST]:"getRequest"},(0,s.n)(o.prototype,"entityData",[n.computed]),(0,s.n)(o.prototype,"parentCollectionData",[n.computed])},7785:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var o,n=r(1006),i=r(1822),a=r(3697),s=r(3703),c=r(3673),u=r(4153),d=r(7786),l=r(5641),T=r(1715),p=r(1821),h=r(12),f=0;function E(e){return"__private_"+f+++"_"+e}var N=E("collections"),O=E("folders"),I=E("requests");class m{constructor(){Object.defineProperty(this,N,{writable:!0,value:void(0,p.i)(this,"collections")}),Object.defineProperty(this,O,{writable:!0,value:void(0,p.i)(this,"folders")}),Object.defineProperty(this,I,{writable:!0,value:void(0,p.i)(this,"requests")})}static getInstance(){return void 0===m.instance&&(m.instance=new m),m.instance}get isOffline(){return!(0,i.getStore)("SyncStatusStore").isSocketConnected}get isEditable(){return!0}get activeEnvironmentVariables(){return(0,i.getStore)("ActiveEnvironmentStore").enabledValues}get isUserMemberOfActiveWorkspace(){return(0,i.getStore)("ActiveWorkspaceStore").isMember}getData(e,t={withPublishedData:!1}){const{uid:r,type:o,versionTag:n=u.DOCUMENTATION_LATEST_VERSION_STRING}=e,i=this._findItem(e),{withPublishedData:a}=t;i||(this._createInitialState({uid:r,type:o,versionTag:n}),n===u.DOCUMENTATION_LATEST_VERSION_STRING?this._fetchDataFromInterface({uid:r,type:o}):this._fetchDataFromSync({uid:r,type:o,versionTag:n}));let s=i||this._findItem(e);return o===u.DOCUMENTATION_ENTITY.COLLECTION&&n===u.DOCUMENTATION_LATEST_VERSION_STRING&&a&&s&&!s.publishedData&&this._fetchPublishedData(r),s}_findItem(e){const{uid:t,type:r,versionTag:o=u.DOCUMENTATION_LATEST_VERSION_STRING}=e;switch(r){case u.DOCUMENTATION_ENTITY.COLLECTION:return this.collections[`${t}:${o}`];case u.DOCUMENTATION_ENTITY.FOLDER:return this.folders[`${t}:${o}`];case u.DOCUMENTATION_ENTITY.REQUEST:return this.requests[`${t}:${o}`];default:throw new TypeError(`DocumentationMasterStore~_findItem: unknown entity type - ${r}`)}}_createInitialState(e){const{uid:t,type:r,versionTag:o=u.DOCUMENTATION_LATEST_VERSION_STRING}=e;switch(r){case u.DOCUMENTATION_ENTITY.COLLECTION:this.collections[`${t}:${o}`]={status:u.DOCUMENTATION_STATUS.LOADING,data:void 0};break;case u.DOCUMENTATION_ENTITY.FOLDER:this.folders[`${t}:${o}`]={status:u.DOCUMENTATION_STATUS.LOADING,data:void 0};break;case u.DOCUMENTATION_ENTITY.REQUEST:this.requests[`${t}:${o}`]={status:u.DOCUMENTATION_STATUS.LOADING,data:void 0};break;default:throw new TypeError(`DocumentationMasterStore~_createInitialState: unknown entity type - ${r}`)}}async _fetchDataFromInterface(e){const{uid:t,type:r}=e,o={...e,versionTag:u.DOCUMENTATION_LATEST_VERSION_STRING};this._updateStatus(o,u.DOCUMENTATION_STATUS.LOADING);try{let e;switch(r){case u.DOCUMENTATION_ENTITY.COLLECTION:e=a.getCollection;break;case u.DOCUMENTATION_ENTITY.FOLDER:e=s.getFolder;break;case u.DOCUMENTATION_ENTITY.REQUEST:e=c.getRequest;break;default:throw new TypeError(`DocumentationMasterStore~_fetchDataFromInterface: unknown entity type - ${r}`)}const n=await e(t);this._updateData(o,n),this._updateStatus(o,u.DOCUMENTATION_STATUS.DATA_FETCHED)}catch(e){this._updateStatus(o,u.DOCUMENTATION_STATUS.ERROR)}}async _fetchDataFromSync(e){const{uid:t,type:r,versionTag:o}=e;if(this._updateStatus(e,u.DOCUMENTATION_STATUS.LOADING),this.isOffline)this._updateStatus(e,u.DOCUMENTATION_STATUS.DATA_NOT_AVAILABLE_OFFLINE);else try{const[n,...i]=t.split("-"),a=i.join("-"),s=(await(0,d.fetchData)(r,a,n,{populate:!0,versionTag:o})).body.data,c=this._transformData(s,r);this._updateData(e,c),this._updateStatus(e,u.DOCUMENTATION_STATUS.DATA_FETCHED)}catch(t){this._updateStatus(e,u.DOCUMENTATION_STATUS.ERROR)}}async _fetchPublishedData(e){try{let t=await(0,d.fetchPublishedData)(e);t=h.get(t,"body.collections");const r={uid:e,type:u.DOCUMENTATION_ENTITY.COLLECTION,versionTag:u.DOCUMENTATION_LATEST_VERSION_STRING},{data:o}=this._findItem(r);o.publishedData=t,this._updateData(r,o)}catch(t){pm.logger.error(`DocumentationMasterStore~_fetchPublishedData: error in fetching published data for collection with uid - ${e}`)}}_transformData(e,t){const r=e.folders,o=e.requests,n=e.responses;function i(e){const t=r.find((t=>t.id===e)),o=t.folders_order.map((e=>i(e))),n=t.order.map((e=>a(e)));return{...t,ownFolders:o,ownRequests:n,type:u.DOCUMENTATION_ENTITY.FOLDER}}function a(e){const t=o.find((t=>t.id===e));return{...t,ownResponses:t.responses,type:u.DOCUMENTATION_ENTITY.REQUEST}}return{...e,uid:`${e.owner}-${e.id}`,ownFolders:t!==u.DOCUMENTATION_ENTITY.REQUEST?e.folders_order.map((e=>i(e))):void 0,ownRequests:t!==u.DOCUMENTATION_ENTITY.REQUEST?e.order.map((e=>a(e))):void 0,ownResponses:t===u.DOCUMENTATION_ENTITY.REQUEST?n:void 0,type:u.DOCUMENTATION_ENTITY.COLLECTION}}_updateStatus(e,t){const{uid:r,type:o,versionTag:n}=e,i=`${r}:${n}`;let a;switch(o){case u.DOCUMENTATION_ENTITY.COLLECTION:a=this.collections;break;case u.DOCUMENTATION_ENTITY.FOLDER:a=this.folders;break;case u.DOCUMENTATION_ENTITY.REQUEST:a=this.requests;break;default:throw new TypeError(`DocumentationMasterStore~_updateStatus: unknown entity type - ${o}`)}if(!a[i])throw new Error(`DocumentationMasterStore~_updateStatus: entry found for uid - ${r}, type - ${o}, versionTag - ${n}. Initialize state using _createInitialState method.`);a[i].status=t}_updateData(e,t){const{uid:r,type:o,versionTag:n}=e,i=`${r}:${n}`;let a;switch(o){case u.DOCUMENTATION_ENTITY.COLLECTION:a=this.collections;break;case u.DOCUMENTATION_ENTITY.FOLDER:a=this.folders;break;case u.DOCUMENTATION_ENTITY.REQUEST:a=this.requests;break;default:throw new TypeError(`DocumentationMasterStore~_updateData: unknown entity type - ${o}`)}if(!a[i])throw new Error(`DocumentationMasterStore~_updateData: no entry found for uid - ${r}, type - ${o}, versionTag - ${n}. Initialize state using _createInitialState method.`);a[i].data=t}updateName(e,t){const{type:r,uid:o}=e;let n;switch(r){case u.DOCUMENTATION_ENTITY.COLLECTION:n=a.updateCollection;break;case u.DOCUMENTATION_ENTITY.FOLDER:n=s.updateFolder;break;case u.DOCUMENTATION_ENTITY.REQUEST:n=c.updateRequest;break;default:throw new TypeError(`DocumentationMasterStore~updateName: unknown entity type - ${r}`)}return n(o,{name:t})}updateDescription(e,t){const{type:r,uid:o}=e;let n;switch(r){case u.DOCUMENTATION_ENTITY.COLLECTION:n=a.updateCollection;break;case u.DOCUMENTATION_ENTITY.FOLDER:n=s.updateFolder;break;case u.DOCUMENTATION_ENTITY.REQUEST:n=c.updateRequest;break;default:throw new TypeError(`DocumentationMasterStore~updateName: unknown entity type - ${r}`)}return n(o,{description:t})}get activeWorkspaceId(){return(0,i.getStore)("ActiveWorkspaceStore").id}getEnvironmentsForWorkspace(e){const t=(0,i.getStore)("ActiveWorkspaceStore"),r=t.id,o=t.environments;if(e!==r||0===o.length){const t=(0,n.observable)([]);return(0,i.getStore)("SyncStatusStore").onSyncAvailable().then((()=>{l.default.get({id:e},{populate:["dependencies.environments"]}).then((0,n.action)((e=>{const r=Object.values(e.environments).map((e=>{const{modelId:t}=(0,T.decomposeUID)(e.id);return{...e,id:t}}));t.push(...r)}))).catch((t=>{pm.logger.error(`DocumentationMasterStore~getEnvironmentsForWorkspace: Error fetching environments for workspace - ${e}`,t)}))})),t}return o}}o=m,m.instance=void 0,(0,p.g)(o.prototype,"collections",[n.observable],(function(){return{}})),(0,p.g)(o.prototype,"folders",[n.observable],(function(){return{}})),(0,p.g)(o.prototype,"requests",[n.observable],(function(){return{}})),(0,p.n)(o.prototype,"isOffline",[n.computed]),(0,p.n)(o.prototype,"isEditable",[n.computed]),(0,p.n)(o.prototype,"_updateStatus",[n.action]),(0,p.n)(o.prototype,"_updateData",[n.action]),(0,p.n)(o.prototype,"activeWorkspaceId",[n.computed])},7787:function(e,t,r){var o=t,n=r(212).Buffer;function i(e,t){try{return decodeURIComponent(e)}catch(r){return o.unescapeBuffer(e,t).toString()}}o.unescapeBuffer=function(e,t){for(var r,o,i,a=new n(e.length),s=0,c=0,u=0;c<=e.length;c++){var d=c<e.length?e.charCodeAt(c):NaN;switch(s){case 0:switch(d){case 37:r=0,o=0,s=1;break;case 43:t&&(d=32);default:a[u++]=d}break;case 1:if(i=d,d>=48&&d<=57)r=d-48;else if(d>=65&&d<=70)r=d-65+10;else{if(!(d>=97&&d<=102)){a[u++]=37,a[u++]=d,s=0;break}r=d-97+10}s=2;break;case 2:if(s=0,d>=48&&d<=57)o=d-48;else if(d>=65&&d<=70)o=d-65+10;else{if(!(d>=97&&d<=102)){a[u++]=37,a[u++]=i,a[u++]=d;break}o=d-97+10}a[u++]=16*r+o}}return a.slice(0,u-1)},o.unescape=i;for(var a=new Array(256),s=0;s<256;++s)a[s]="%"+((s<16?"0":"")+s.toString(16)).toUpperCase();o.escape=function(e){"string"!=typeof e&&(e+="");for(var t="",r=0,o=0;o<e.length;++o){var n=e.charCodeAt(o);if(!(33===n||45===n||46===n||95===n||126===n||n>=39&&n<=42||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122))if(o-r>0&&(t+=e.slice(r,o)),n<128)r=o+1,t+=a[n];else if(n<2048)r=o+1,t+=a[192|n>>6]+a[128|63&n];else if(n<55296||n>=57344)r=o+1,t+=a[224|n>>12]+a[128|n>>6&63]+a[128|63&n];else{var i;if(!(++o<e.length))throw new URIError("URI malformed");i=1023&e.charCodeAt(o),r=o+1,t+=a[240|(n=65536+((1023&n)<<10|i))>>18]+a[128|n>>12&63]+a[128|n>>6&63]+a[128|63&n]}}return 0===r?e:r<e.length?t+e.slice(r):t};var c=function(e){return"string"==typeof e?e:"number"==typeof e&&isFinite(e)?""+e:"boolean"==typeof e?e?"true":"false":""};function u(e,t){try{return t(e)}catch(t){return o.unescape(e,!0)}}o.stringify=o.encode=function(e,t,r,n){t=t||"&",r=r||"=";var i=o.escape;if(n&&"function"==typeof n.encodeURIComponent&&(i=n.encodeURIComponent),null!==e&&"object"==typeof e){for(var a=Object.keys(e),s=a.length,u=s-1,d="",l=0;l<s;++l){var T=a[l],p=e[T],h=i(c(T))+r;if(Array.isArray(p)){for(var f=p.length,E=f-1,N=0;N<f;++N)d+=h+i(c(p[N])),N<E&&(d+=t);f&&l<u&&(d+=t)}else d+=h+i(c(p)),l<u&&(d+=t)}return d}return""},o.parse=o.decode=function(e,t,r,n){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;"string"!=typeof t&&(t+="");var s=r.length,c=t.length,d=1e3;n&&"number"==typeof n.maxKeys&&(d=n.maxKeys);var l=1/0;d>0&&(l=d);var T=o.unescape;n&&"function"==typeof n.decodeURIComponent&&(T=n.decodeURIComponent);for(var p=T!==i,h=[],f=0,E=0,N=0,O="",I="",m=p,D=p,S=0,g=0;g<e.length;++g){var y=e.charCodeAt(g);if(y!==t.charCodeAt(E)){if(E=0,D||(37===y?S=1:S>0&&(y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102)?3==++S&&(D=!0):S=0),N<s){if(y===r.charCodeAt(N)){if(++N===s)f<(A=g-N+1)&&(O+=e.slice(f,A)),S=0,f=g+1;continue}N=0,m||(37===y?S=1:S>0&&(y>=48&&y<=57||y>=65&&y<=70||y>=97&&y<=102)?3==++S&&(m=!0):S=0)}43===y&&(N<s?(g-f>0&&(O+=e.slice(f,g)),O+="%20",m=!0):(g-f>0&&(I+=e.slice(f,g)),I+="%20",D=!0),f=g+1)}else if(++E===c){var _,A=g-E+1;if(N<s?f<A&&(O+=e.slice(f,A)):f<A&&(I+=e.slice(f,A)),m&&(O=u(O,T)),D&&(I=u(I,T)),-1===h.indexOf(O))a[O]=I,h[h.length]=O;else(_=a[O])instanceof Array?_[_.length]=I:a[O]=[_,I];if(0==--l)break;m=D=p,S=0,O=I="",f=g+1,E=N=0}}l>0&&(f<e.length||N>0)&&(f<e.length&&(N<s?O+=e.slice(f):E<c&&(I+=e.slice(f))),m&&(O=u(O,T)),D&&(I=u(I,T)),-1===h.indexOf(O)?(a[O]=I,h[h.length]=O):(_=a[O])instanceof Array?_[_.length]=I:a[O]=[_,I]);return a}}}]);