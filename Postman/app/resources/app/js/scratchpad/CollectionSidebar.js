"use strict";(self.webpackChunk_postman_app_scratchpad=self.webpackChunk_postman_app_scratchpad||[]).push([[6],{6681:function(e,t,i){i.r(t),i.d(t,{realtimeEventsForSubscription:function(){return r}});var s=i(1954),o=i(1970),n=i(12);function r(e){return(0,o.getRealtimeMessagesObservable)().pipe((0,s.filter)((t=>n.get(t,"data.subscription.id")===e)))}},6677:function(e,t,i){i.r(t);var s=i(1),o=i(2098),n=i(2537),r=i(1821),a=i(12);const l=(0,r.c)(class extends s.Component{constructor(e){super(e),this.renderButton=this.renderButton.bind(this)}renderButton(){if(this.props.buttonText)return s.createElement(n.Button,{type:"secondary",onClick:this.props.handler},this.props.buttonText)}render(){return s.createElement("div",{className:"sidebar-error-wrapper"},s.createElement("div",{className:"sidebar-error-thumbnail"}),s.createElement("div",{className:"sidebar-error-content-container"},s.createElement("div",{className:"sidebar-error-header"},this.props.title),s.createElement("div",{className:"sidebar-error-content"},this.props.description),this.renderButton()))}},[o.observer]);t.default=l,l.defaultProps={description:null,buttonText:null,handler:a.noop}},6680:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s=i(1900),o=i(1731),n=i(6681),r=i(1822),a=i(3914),l=i(12);class d extends a.default{getListAndSubscribeAPIEndpoint(){throw new Error(`${this.constructor.name}~getListAndSubscribeAPIEndpoint: not implemented`)}getListAPIEndpoint(){throw new Error(`${this.constructor.name}~getListAPIEndpoint: not implemented`)}hydrate(e=!0){return new Promise(((t,i)=>{this._connection_subscription=(0,s.getSocketConnectionObservable)().subscribe((s=>{if("connect"===s)return this._getAPIResponse().then((t=>{const i=l.get(t,"body.data",[]),s=l.get(t,"body.subscription.id");this._hydrateEntities(i),e&&s&&this._subscribeToChangeEvents(s)})).then((()=>t())).catch((e=>(pm.logger.warn("ListingAPIAdapter~hydrate: Failed to hydrate entities",e),i(e))))}))}))}dispose(){super.dispose(),this._connection_subscription&&this._connection_subscription.unsubscribe(),this._realtime_subscription&&this._realtime_subscription.unsubscribe()}_hydrateEntities(e){this.model.hydrate&&this.model.hydrate(e)}_removeEntities(e){l.isEmpty(e)||this.model.remove&&this.model.remove(e)}_addEntities(e){l.isEmpty(e)||this.model.add&&this.model.add(e)}async _getAPIResponse(){return await(0,r.getStore)("SyncStatusStore").onSyncAvailable(),o.default.request(this.getListAndSubscribeAPIEndpoint(),{method:"POST",timeout:3e4})}_subscribeToChangeEvents(e){this._realtime_subscription&&this._realtime_subscription.unsubscribe(),this._realtime_subscription=(0,n.realtimeEventsForSubscription)(e).subscribe((e=>{const t=l.get(e,"data.data",[]),i=t.filter((({action:e})=>["create","update"].includes(e))).map((({id:e})=>e)),s=t.filter((({action:e})=>"delete"===e)).map((({id:e})=>e));this._removeEntities(s),this._createOrUpdateEntities(i)}))}async _createOrUpdateEntities(e){if(l.isEmpty(e))return;await(0,r.getStore)("SyncStatusStore").onSyncAvailable();const t=await o.default.request(this.getListAPIEndpoint(),{method:"POST",data:{ids:e},timeout:3e4}),i=l.get(t,"body.data",[]);this._addEntities(i)}}},6679:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var s=i(1822),o=i(1714),n=i(1715),r=i(3696),a=i(6680),l=i(12);class d extends a.default{getListAndSubscribeAPIEndpoint(){const e=(0,s.getStore)("ActiveWorkspaceStore").id;return r.COLLECTION_LIST_AND_SUBSCRIBE`${e}`}getListAPIEndpoint(){const e=(0,s.getStore)("ActiveWorkspaceStore").id;return r.COLLECTION_LIST`${e}`}dispose(){super.dispose(),this.unsubscribeModelEvents&&this.unsubscribeModelEvents()}_subscribeToChangeEvents(e){super._subscribeToChangeEvents(e),this.unsubscribeModelEvents&&this.unsubscribeModelEvents(),this.unsubscribeModelEvents=null,this.unsubscribeModelEvents=pm.eventBus.channel("model-events").subscribe((e=>{if("collection"!==(0,o.getEventNamespace)(e))return;const t=(0,o.getEventName)(e);if(!["favorite","unfavorite"].includes(t))return;const i=(0,o.getEventData)(e),s=l.get(i,"collection.id"),r=l.get(i,"collection.owner"),a=(0,n.composeUID)(s,r),d="favorite"===t;this.model.updateFavorite&&this.model.updateFavorite(a,d)}))}}},6678:function(e,t,i){i.r(t),i.d(t,{default:function(){return _}});var s,o=i(1006),n=i(1822),r=i(1941),a=i(6658),l=i(3917),d=i(3912),c=i(5939),p=i(5963),h=i(6679),u=i(4155),m=i(5638),g=i(3696),f=i(1821),E=i(12),I=0;function b(e){return"__private_"+I+++"_"+e}var C=b("status");class _{constructor(){this.model=null,this._adapters=[],Object.defineProperty(this,C,{writable:!0,value:void(0,f.i)(this,"status")})}async didCreate(){this.model=new a.default;try{this.setSidebarStatus(u.READY),await this._loadFromModelEventsAdapter()}catch(e){return pm.logger.error("CollectionSidebarController~didCreate: Error in loading collections from model events",e),this.setSidebarStatus(u.ERROR)}return this.setSidebarStatus(u.READY)}beforeDestroy(){this._adapters&&this._adapters.forEach((e=>{E.isFunction(e.dispose)&&e.dispose()})),this.model=null,this._adapters=[]}setSidebarStatus(e){this.status=e}async _fetchCollections(){await(0,n.getStore)("SyncStatusStore").onSyncAvailable();const e=(0,n.getStore)("ActiveWorkspaceStore").id,t=await m.RemoteSyncRequestService.request(g.COLLECTION_LIST`${e}`,{method:"POST",timeout:3e4}),i=E.forEach(E.get(t,"body.data",[]),(e=>{const t={model:"collection",modelId:e.id,action:"UPDATE_COLLECTION"},i=r.default.getCompositeKey(t);!(0,n.getStore)("PermissionStore").members.has(i)&&E.set(e,"attributes.permissions.userCanUpdate",!0)}));return this.model.hydrate&&this.model.hydrate(i),i}async _loadFromModelEventsAdapter(){const e=(0,n.getStore)("ActiveWorkspaceStore").id,t=new l.default(this.model.getCollectionAdapterModel(),{activeWorkspace:e,useUID:!0}),i=new d.default(this.model.getFolderAdapterModel()),s=new c.default(this.model.getRequestAdapterModel()),o=[t.hydrate(),i.hydrate(),s.hydrate()];this._adapters.push(t,i,s),await Promise.all(o),this.setSidebarStatus(u.READY);const r=new p.default(this.model.getResponseAdapterModel());this._adapters.push(r),await r.hydrate()}async _loadFromListingAPIAdapter(){const e=new h.default(this.model.getCollectionAdapterModel());this._adapters.push(e),await e.hydrate()}}s=_,(0,f.g)(s.prototype,"status",[o.observable],(function(){return u.LOADING})),(0,f.n)(s.prototype,"setSidebarStatus",[o.action])},6660:function(e,t,i){i.r(t);var s=i(1),o=i(2098),n=i(2875),r=i(4612),a=i(1006),l=i(2539),d=i.n(l),c=i(2792),p=i(2584),h=i(6661),u=i(6665),m=i(6667),g=i(6669),f=i(6671),E=i(6672),I=i(2090),b=(i(6658),i(3685)),C=i(3684),_=i(6673),S=i(1821),v=i(12);const T="empty",O="loading",y=(0,S.c)(class extends s.Component{constructor(e){super(e),this.handleDragDrop=this.handleDragDrop.bind(this),this.handleCreateRequest=this.handleCreateRequest.bind(this),this.getListItem=this.getListItem.bind(this),this.getItemSize=this.getItemSize.bind(this),this.observeSizeChange=this.observeSizeChange.bind(this),this.unobserveSizeChange=this.unobserveSizeChange.bind(this),this.scrollToItemById=this.scrollToItemById.bind(this),this.debouncedOpenActiveItemInTab=v.debounce(this.openActiveItemInTab.bind(this),200),this.handleClickOutside=this.handleClickOutside.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.mouseDownInsideInlineInput=!1,this.heightSetForEmptyItems={},this.heightReactionDisposer=(0,a.reaction)((()=>v.get(this.props.model,"items")),(()=>{this.listRef&&this.listRef.resetAfterIndex(0)})),this.focusReactionDisposer=(0,a.reaction)((()=>v.get(this.props.model,"activeItem")),(e=>{e&&requestIdleCallback(this.scrollToItemById.bind(this,e.id))})),this.resizeObserver=new ResizeObserver((e=>{for(const t of e){if(!(t&&t.target&&t.target.dataset))return;const{index:e}=t.target.dataset;this.heightSetForEmptyItems[e]=t.target.offsetHeight}this.listRef.resetAfterIndex(0)})),this.editCache=null}componentWillUnmount(){this.heightReactionDisposer&&this.heightReactionDisposer(),this.focusReactionDisposer&&this.focusReactionDisposer(),this.props.model.activeItem&&this.props.model.activeItem.commitCachedRename(),clearTimeout(this.clearCollectionLoadingTimer)}getListItem({index:e,style:t}){const{model:i}=this.props,o=v.get(i,["items",e]),n=e&&v.get(i,["items",e-1]),{activeItem:r}=i;if(!o)return pm.logger.warn("CollectionSideBarListContainer~getListItem","Could not find any item at index",e),null;const a=i.isFocused(o.id),l={};switch(o.type===T&&(o.parent=n),r&&(l.show=this.shouldShowIndent(o,r),l.depth=r.depth-1),o.type){case O:return s.createElement("div",{className:"collection-virtualized-list-item__loading",style:t},s.createElement(_.default,{depth:o.depth,activeIndent:l}));case T:{const r=n.type===b.COLLECTION?n:i.getParentCollection(n);return s.createElement("div",{className:"collection-virtualized-list-item__empty",style:t},s.createElement(E.default,{parent:n,canAddRequest:r.userCanUpdate,depth:o.depth,index:e,observeSizeChange:this.observeSizeChange,unobserveSizeChange:this.unobserveSizeChange,onAddRequest:this.handleCreateRequest,activeIndent:l}))}case b.COLLECTION:return s.createElement("div",{className:"collection-virtualized-list-item__head",style:t},s.createElement(p.default,{identifier:o.xpath,key:o.xpath},s.createElement(f.default,{key:o.id,item:o,model:i,persistentState:o._persistentState,onDragDrop:this.handleDragDrop})));case b.FOLDER:{const e=o.$collection;return s.createElement("div",{className:"collection-virtualized-list-item__folder",style:t},s.createElement(p.default,{identifier:o.xpath,key:o.xpath},s.createElement(u.default,{key:o.id,model:i,item:o,persistentState:o._persistentState,collection:e,isFocused:a,onDragDrop:this.handleDragDrop,activeIndent:l})))}case b.REQUEST:{const e=o.$collection;return s.createElement("div",{className:"collection-virtualized-list-item__request",style:t},s.createElement(p.default,{identifier:o.xpath,key:o.xpath},s.createElement(m.default,{key:o.id,model:i,item:o,persistentState:o._persistentState,collection:e,isFocused:a,isFirstChild:n&&n.depth<o.depth,onDragDrop:this.handleDragDrop,activeIndent:l})))}case b.RESPONSE:{const e=o.$collection;return s.createElement("div",{className:"collection-virtualized-list-item__example",style:t},s.createElement(p.default,{identifier:o.xpath,key:o.xpath},s.createElement(g.default,{key:o.id,model:i,item:o,persistentState:o._persistentState,collection:e,isFocused:a,isFirstChild:n&&n.depth<o.depth,onDragDrop:this.handleDragDrop,activeIndent:l})))}default:return null}}getItemSize(e){const t=v.get(this.props.model,["items",e]);return t?t.type===T?this.heightSetForEmptyItems[e]||52:28:0}getKeyMapHandlers(){return{nextItem:pm.shortcuts.handle("nextItem",this.focusNextShortcut.bind(this)),prevItem:pm.shortcuts.handle("prevItem",this.focusPrevShortcut.bind(this)),expandItem:pm.shortcuts.handle("expandItem",this.expandItemShortcut.bind(this)),collapseItem:pm.shortcuts.handle("collapseItem",this.collapseItemShortcut.bind(this)),select:pm.shortcuts.handle("select",this.selectItemShortcut.bind(this)),cut:pm.shortcuts.handle("cut",this.cutItemShortcut.bind(this)),copy:pm.shortcuts.handle("copy",this.copyItemShortcut.bind(this)),paste:pm.shortcuts.handle("paste",this.pasteItemShortcut.bind(this)),duplicate:pm.shortcuts.handle("duplicate",this.duplicateItemShortcut.bind(this)),delete:pm.shortcuts.handle("delete",this.deleteItemShortcut.bind(this)),rename:pm.shortcuts.handle("rename",this.handleRenameShortcut.bind(this)),search:pm.shortcuts.handle("search"),quit:pm.shortcuts.handle("quit",this.handleQuitShortcut.bind(this))}}observeSizeChange(e){this.resizeObserver&&this.resizeObserver.observe(e)}unobserveSizeChange(e,t){this.resizeObserver&&this.resizeObserver.unobserve(e),delete this.heightSetForEmptyItems[t]}handleQuitShortcut(){this.props.model.activeItem&&this.props.model.activeItem.cancelRename()}handleClickOutside(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className),{activeItem:i}=this.props.model,s=this.mouseDownInsideInlineInput&&!t;this.mouseDownInsideInlineInput=!1,s?e&&e.stopPropagation():!t&&i&&i._persistentState.isEditing&&(this.props.model.activeItem&&this.props.model.activeItem.commitCachedRename(),e&&e.stopPropagation())}handleRenameShortcut(){const{activeItem:e}=this.props.model;e&&e.handleAction(C.ACTION_TYPE_RENAME_TOGGLE)}shouldShowIndent(e,t){if(!t||!e)return!1;const i=this.props.model.getParent(t);if(!i)return!1;if(i.id===e.id)return!0;const s=e.type===T||e.type===O?e.parent:this.props.model.getParent(e);return!!s&&this.shouldShowIndent(s,t)}scrollToItemById(e){if(!e)return;const t=v.findIndex(v.get(this.props.model,"items"),(t=>t.id===e));t<0||this.listRef&&this.listRef.scrollToItem(t)}focus(){this.sidebarListRef&&this.sidebarListRef.focus()}openActiveItemInTab(){const{model:e}=this.props;e.activeItem&&e.activeItem.openInTab()}focusNextShortcut(e){e&&e.preventDefault();const{model:t}=this.props;t.focusNextItem(),this.debouncedOpenActiveItemInTab()}focusPrevShortcut(e){e&&e.preventDefault();const{model:t}=this.props;t.focusPreviousItem(),this.debouncedOpenActiveItemInTab()}expandItemShortcut(e){e&&e.preventDefault();const{model:t}=this.props||{},{activeItem:i}=t||{};i&&t.expandItem(i)}collapseItemShortcut(e){e&&e.preventDefault();const{model:t}=this.props||{},{activeItem:i}=t||{};if(!i)return;if(t.isOpen(i.id))return t.collapseItem(i);const s=t.getParent(i);s&&(t.isOpen(s.id)?t.collapseItem(s):t.focusItem(s))}selectItemShortcut(e){const{activeItem:t}=this.props.model;t&&(t.commitCachedRename(),e&&e.preventDefault(),t.type===b.REQUEST&&t.handleAction(C.ACTION_TYPE_SELECT,{returnKey:!0}))}cutItemShortcut(){const{model:e}=this.props||{},{activeItem:t}=e||{};if(e&&t){switch(t.type){case b.REQUEST:case b.FOLDER:if(!t.$collection.userCanUpdate)return pm.toasts.error("You do not have permissions required to perform the action.");break;default:return}e.cutItem()}}copyItemShortcut(){const{model:e}=this.props||{};e.copyItem()}pasteItemShortcut(){const{model:e}=this.props||{};return!(!e||!e.clipboard)&&((0,I.isWorkspaceMember)()?void e.pasteItem():(0,I.canJoinWorkspace)()?pm.mediator.trigger("openUnjoinedWorkspaceModal"):(0,I.isLoggedIn)()?pm.toasts.error("You do not have permissions required to perform the action."):pm.mediator.trigger("showSignInModal",{type:"collection_sidebar",origin:"paste_item"}))}duplicateItemShortcut(){const{activeItem:e}=this.props.model||{};e&&e.handleAction(C.ACTION_TYPE_DUPLICATE)}deleteItemShortcut(e){const{activeItem:t}=this.props.model||{};t&&!t._persistentState.isEditing&&(e&&e.preventDefault(),t.handleAction(C.ACTION_TYPE_DELETE))}handleDragDrop(e,t,i){"tab"===t.type&&"runner"===t.id||e.id!==t.id&&(("request"===t.type&&"request"===e.type||"response"===t.type&&"response"===e.type)&&"on"===i&&(i="before"),this.props.model.reorder(e,t,i))}handleCreateRequest(e){return e.handleAction(C.ACTION_TYPE_ADD_REQUEST)}handleMouseDown(e){const t="input input-box inline-input"===(e&&e.target&&e.target.className);this.mouseDownInsideInlineInput=!!t}render(){const e=v.get(this.props.model,"items");if(v.isEmpty(e)){const e=v.get(this.props.model,"searchQuery");return s.createElement(h.default,{query:e})}const t=e=>s.createElement(o.Observer,null,this.getListItem.bind(this,e)),i=({height:i,width:r})=>s.createElement(o.Observer,null,(()=>s.createElement(n.VariableSizeList,{height:i,itemCount:e.length,itemSize:this.getItemSize,width:r,ref:e=>{this.listRef=e},overscanCount:5,className:"collection-sidebar-list__list"},t)));return s.createElement(c.default,{handlers:this.getKeyMapHandlers()},s.createElement("div",{className:"collection-sidebar-list",ref:e=>{this.sidebarListRef=e},onMouseDown:this.handleMouseDown,onClickCapture:this.handleClickOutside},s.createElement(r.default,null,i)))}},[o.observer,d()]);t.default=y},6661:function(e,t,i){i.r(t);var s=i(1),o=i(2098),n=i(6664),r=i(1822),a=i(3697),l=i(6662),d=i(6663),c=i(1821);const p=(0,c.c)(class extends s.Component{constructor(e){super(e),this.handleCreateCollection=this.handleCreateCollection.bind(this)}getTooltipText(e,t){if(!e)return"You do not have permissions to perform this action."}handleCreateCollection(){this.props.onClose&&this.props.onClose(),(0,a.createCollection)()}isCollectionAddEnabled(e,t){return e}render(){const e=(0,r.getStore)("PermissionStore"),t=(0,r.getStore)("ActiveWorkspaceStore").id,i=e.can("addCollection","workspace",t),{isLoggedIn:o}=(0,r.getStore)("CurrentUserStore");return this.props.query?s.createElement(d.default,{searchQuery:this.props.query,illustration:s.createElement(n.default,null)}):s.createElement(l.default,{illustration:s.createElement(n.default,null),title:"You don’t have any collections",message:"Collections let you group related requests, making them easier to access and run.",action:{label:"Create Collection",handler:this.handleCreateCollection,tooltip:this.getTooltipText(i,o)},hasPermissions:this.isCollectionAddEnabled(i,o)})}},[o.observer]);t.default=p,p.defaultProps={query:null,onClose:null}},6672:function(e,t,i){i.r(t),i.d(t,{default:function(){return c}});var s=i(1),o=i(4),n=i(2102),r=i.n(n),a=i(2537),l=i(3685),d=i(12);class c extends s.Component{componentDidMount(){this.selfNode=(0,o.findDOMNode)(this),this.props.observeSizeChange&&this.props.observeSizeChange(this.selfNode)}componentWillUnmount(){this.props.unobserveSizeChange&&this.props.unobserveSizeChange(this.selfNode,this.props.index)}render(){const{parent:e}=this.props,t=e.type===l.COLLECTION;return s.createElement("div",{className:"collection-sidebar-list-item__body--empty","data-index":this.props.index},d.times(this.props.depth,(e=>s.createElement("div",{key:`indent-${e}`,className:r()("collection-sidebar__indent",{"active-indent":e===Number(this.props.activeIndent.depth)&&this.props.activeIndent.show})}))),s.createElement("div",{className:r()("collection-sidebar-list__empty-item__content",{"collection-sidebar-list__empty-item__content__for-collection":t})},`This ${e.type} is empty`,this.props.canAddRequest&&s.createElement("div",null,s.createElement(a.Button,{type:"text",className:"learn-more-link",onClick:()=>this.props.onAddRequest(this.props.parent)},"Add a request"),"to start working.")))}}c.defaultProps={observeSizeChange:null,unobserveSizeChange:null,onAddRequest:d.noop,canAddRequest:!1}},6669:function(e,t,i){i.r(t);var s=i(1),o=i(4),n=i(2102),r=i.n(n),a=i(2119),l=i.n(a),d=i(2890),c=i(2112),p=i(2098),h=i(1822),u=i(3787),m=i(3046),g=i(2584),f=i(3684),E=i(6658),I=i(2090),b=i(6666),C=i(6670),_=i(1821),S=i(12);const v=e=>{const t=(0,o.findDOMNode)(e).getBoundingClientRect();return t.top+t.height/2},T={canDrag(e){return!e.item._persistentState.isEditing&&((0,I.isWorkspaceMember)()&&e.collection.userCanUpdate)},beginDrag(e){return{id:e.item.id,type:"response",request:e.item.request}},endDrag(e,t){const i=t.getItem(),{dropItem:s,position:o}=t.getDropResult()||{};S.isUndefined(s)||e.onDragDrop(i,s,o)}},O={hover(e,t,i){const{persistentState:s}=e,o=t.getItem().id,n=e.item.id,r="response"===t.getItem().type&&e.collection.userCanUpdate;if(o===n||!r)return{};e.isFirstChild?t.getClientOffset().y>v(i)?s.scheduleHoverUpdate("bottom"):s.scheduleHoverUpdate("top"):s.scheduleHoverUpdate("bottom")},drop(e,t,i){const s=t.getItem().id,o=e.item.id,n="response"===t.getItem().type&&e.collection.userCanUpdate;if(s===o||!n)return{};let r="after";return e.isFirstChild&&(r=t.getClientOffset().y>v(i)?"after":"before"),{dropItem:{id:e.item.id,type:"response",request:e.item.request},position:r}}},y=(0,_.c)(class extends b.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return r()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__request":!0,"is-active":this.props.selected})}getHeadClasses(){return r()({"collection-sidebar-list-item__request__head":!0,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":(this.props.persistentState.dropHover||this.props.persistentState.dropHoverBottom)&&this.props.isDragOver,"is-hovered":this.props.persistentState.dropdownOpen,"is-selected":this.props.selected,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging})}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,item:o,persistentState:n}=this.props,a=o.depth;return super.render(this.getClasses(),t(i(e(s.createElement("div",{className:this.getHeadClasses(),title:o.name,onClick:this.onItemClick},S.times(a,(e=>s.createElement("div",{key:`indent-${e}`,className:r()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),s.createElement("div",{className:"collection-sidebar-list-item__example-icon__wrapper"},s.createElement(c.default,{name:"icon-entity-example-stroke",color:"content-color-secondary",className:"collection-sidebar-list-item__example-icon"})),s.createElement(g.default,{identifier:"head"},s.createElement("div",{className:"collection-sidebar-list-item__request__meta"},s.createElement(m.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__request__name",placeholder:"Example Name",ref:this.setInlineInputRef,value:o.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),s.createElement("div",{className:"collection-sidebar-list-item__request__actions"},(n.isHovered||n.dropdownOpen)&&s.createElement(g.default,{identifier:"responseOption"},s.createElement("div",{className:"collection-sidebar-request-dropdown-actions-wrapper"},s.createElement(C.default,{className:"collection-sidebar-request-actions-dropdown",actions:o.actions,onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle})))))))))}},[p.observer,(0,d.DragSource)("collection-sidebar-response-item",T,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}))),(0,d.DropTarget)("collection-sidebar-response-item",O,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})}))),(0,u.default)([{label:"Rename",shortcut:"rename",isVisible(e){return(0,h.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(f.ACTION_TYPE_RENAME_TOGGLE)}},{label:"Duplicate",shortcut:"duplicate",isVisible(e){return(0,h.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(f.ACTION_TYPE_DUPLICATE)}},{label:"Delete",shortcut:"delete",isVisible(e){return(0,h.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(f.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))]);t.default=y,y.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,selected:!1,isContextMenuOpen:S.noop,connectDragSource:S.noop,connectDropTarget:S.noop,connectDragPreview:S.noop},y.propTypes={collection:l().object.isRequired,item:l().object.isRequired,model:l().instanceOf(E.default).isRequired,activeIndent:l().object.isRequired,isFocused:l().bool,isDragOver:l().bool,isDragging:l().bool,selected:l().bool,isContextMenuOpen:l().func,connectDragSource:l().func,connectDropTarget:l().func,connectDragPreview:l().func}},6665:function(e,t,i){i.r(t);var s=i(1),o=i(4),n=i(2102),r=i.n(n),a=i(2119),l=i.n(a),d=i(2890),c=i(2098),p=i(2112),h=i(3787),u=i(3046),m=i(1822),g=i(2584),f=i(2537),E=i(2090),I=i(3079),b=i(3684),C=i(6658),_=i(6666),S=i(1821),v=i(12);const T={canDrag(e){return!e.item._persistentState.isEditing&&((0,E.isWorkspaceMember)()&&e.collection.userCanUpdate)},beginDrag(e){return{id:e.item.id,type:"folder",collection:e.item.collection}},endDrag(e,t){const i=t.getItem(),{dropItem:s,position:o}=t.getDropResult()||{};v.isUndefined(s)||e.onDragDrop(i,s,o)}},O={hover(e,t,i){const{persistentState:s}=e,n=t.getItem().id,r=e.item.id,a=t.getItem();let l=!1;if("request"!==a.type&&"folder"!==a.type||(l=e.collection.userCanUpdate),n===r||!l)return{};const d=t.getClientOffset(),c=(0,o.findDOMNode)(i).getBoundingClientRect(),p=c.top+30-7.5,h=c.top+7.5;"request"!==t.getItem().type&&d.y>p?s.scheduleHoverUpdate("bottom"):"request"!==t.getItem().type&&d.y<h?s.scheduleHoverUpdate("top"):d.y<p&&d.y>h?s.scheduleHoverUpdate("on"):s.scheduleHoverUpdate()},drop(e,t,i){const s=t.getItem().id,n=e.item.id,r=t.getItem();let a=!1;if("request"!==r.type&&"folder"!==r.type||(a=e.collection.userCanUpdate),s===n||!a)return{};const l=t.getClientOffset(),d=(0,o.findDOMNode)(i).getBoundingClientRect(),c=.25*d.height,p=d.bottom-c,h=d.top+c;let u;return"request"!==r.type&&l.y>p?u="after":"request"!==r.type&&l.y<h?u="before":l.y<p&&l.y>h&&(u="on"),{dropItem:{id:e.item.id,type:"folder",collection:e.item.collection},position:u}}},y=(0,S.c)(class extends _.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return r()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__folder":!0,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":this.props.persistentState.dropHoverBottom&&this.props.isDragOver})}getHeadClasses(){return r()({"collection-sidebar-list-item__folder__head":!0,"is-open":this.isOpen(),"is-hovered":this.props.persistentState.dropdownOpen,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging,"is-right-above":this.props.persistentState.dropHover&&this.props.isDragOver})}getFolderIconClasses(){return r()({"pm-icon":!0,"pm-icon-normal":!0,"collection-sidebar-list-item__folder__head__icon":!0,icon_folder:!0})}isOpen(){return this.props.model.isOpen(this.props.item.id)}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,item:o,model:n,persistentState:a}=this.props,l=o.depth,d=n.isOpen(o.id)?"down":"right";return super.render(this.getClasses(),t(i(e(s.createElement("div",{title:o.name,className:this.getHeadClasses(),onClick:this.onItemClick},v.times(l,(e=>s.createElement("div",{key:`indent-${e}`,className:r()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),s.createElement(f.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},s.createElement(p.default,{name:`icon-direction-${d}`,className:"pm-icon pm-icon-normal"})),s.createElement("div",{className:"collection-sidebar-list-item__folder__icon-wrapper"},s.createElement(p.default,{name:"icon-entity-folder-stroke",className:this.getFolderIconClasses()})),s.createElement(g.default,{identifier:"head"},s.createElement("div",{className:"collection-sidebar-list-item__folder__head__meta"},s.createElement(u.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__folder__head__name",placeholder:"Folder Name",ref:this.setInlineInputRef,value:o.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),s.createElement("div",{className:"collection-sidebar-list-item__folder__head__actions"},(a.isHovered||a.dropdownOpen)&&s.createElement(g.default,{identifier:"folderOption"},s.createElement("div",{className:"collection-sidebar-folder-dropdown-actions-wrapper"},s.createElement(I.default,{className:"collection-sidebar-folder-actions-dropdown",onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle,actions:o.actions})))))))))}},[c.observer,(0,d.DragSource)("collection-sidebar-folder-item",T,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}))),(0,d.DropTarget)(["collection-sidebar-request-item","collection-sidebar-folder-item"],O,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})}))),(0,h.default)([{label:"Add Request",isVisible(e){return(0,m.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_ADD_REQUEST)}},{label:"Add Folder",isVisible(e){return(0,m.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_ADD_FOLDER)}},{label:"Rename",shortcut:"rename",isVisible(e){return(0,m.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_RENAME_TOGGLE)}},{label:"Duplicate",shortcut:"duplicate",isVisible(e){return(0,m.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_DUPLICATE)}},{label:"Delete",shortcut:"delete",isVisible(e){return(0,m.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))]);t.default=y,y.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,isContextMenuOpen:v.noop,connectDragSource:v.noop,connectDropTarget:v.noop,connectDragPreview:v.noop},y.propTypes={collection:l().object.isRequired,item:l().object.isRequired,model:l().instanceOf(C.default).isRequired,isFocused:l().bool,isDragOver:l().bool,isDragging:l().bool,isContextMenuOpen:l().func,connectDragSource:l().func,connectDropTarget:l().func,connectDragPreview:l().func}},6671:function(e,t,i){i.r(t);var s=i(1),o=i(2890),n=i(2119),r=i.n(n),a=i(2098),l=i(2102),d=i.n(l),c=i(2112),p=i(2537),h=i(3046),u=i(3907),m=i(3787),g=i(1822),f=i(2584),E=i(1715),I=i(4178),b=i(2090),C=i(3049),_=i(3684),S=i(6658),v=i(6666),T=i(1821),O=i(12);const y=(0,T.c)(class extends v.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this),this.handleToggleFavorite=this.handleToggleFavorite.bind(this)}getClasses(){return d()({"collection-sidebar-list-item__head":!0})}getHeadClasses(){return d()({"collection-sidebar-list-item__head__head":!0,"is-hovered":this.props.persistentState.dropdownOpen,"is-focused":this.isFocused(),"is-drop-hovered":this.props.item.userCanUpdate&&this.props.isDragOver,"is-favorited":this.isFavorite(),"is-open":this.isOpen()})}getActionsClasses(){return d()({"collection-sidebar-list-item__head__actions":!0,"is-selected":this.isExpanded()})}isExpanded(){return this.props.model.expandedItem===this.props.item.id}isFavorite(){return this.props.item.isFavorite}isOpen(){return this.props.model.isOpen(this.props.item.id)}isFocused(){return this.props.item.id===O.get(this.props.model,"activeItem.id")}onItemClick(){this.props.isContextMenuOpen()||super.onItemClick()}handleToggleFavorite(e){e&&e.stopPropagation(),this.props.item.handleAction(_.ACTION_TYPE_FAVORITE)}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,item:o,persistentState:n}=this.props,r=!(0,g.getStore)("OnlineStatusStore").userCanSave,a=this.isOpen()?"down":"right";return super.render(this.getClasses(),t(i(e(s.createElement("div",{title:o.name,className:this.getHeadClasses(),onClick:this.onItemClick},s.createElement(p.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},s.createElement(c.default,{name:`icon-direction-${a}`,className:"pm-icon pm-icon-normal"})),s.createElement(f.default,{identifier:"head"},s.createElement("div",{className:"collection-sidebar-list-item__head__meta"},s.createElement("div",{className:"collection-sidebar-list-item__head__name__wrapper",title:o.name},s.createElement("div",{className:"collection-sidebar-list-item__head__name-icon__wrapper"},s.createElement(h.default,{className:"collection-sidebar-list-item__head__name",placeholder:"Collection Name",ref:this.setInlineInputRef,value:o.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}),s.createElement(u.default,{collection:o,userCanUpdate:o.userCanUpdate,showForkLabel:!0})),(n.isHovered||this.isFavorite())&&s.createElement(p.Button,{disabled:r,tooltip:r&&C.DISABLED_TOOLTIP_IS_OFFLINE,active:this.isFavorite(),className:"collection-sidebar-list-item__head__favorite-button",onClick:this.handleToggleFavorite},this.isFavorite()?s.createElement(c.default,{name:"icon-action-favorite-fill",className:"collection-sidebar-list-item__head__favorite-button-icon pm-icon pm-icon-secondary"}):s.createElement(c.default,{name:"icon-action-favorite-stroke",className:"pm-icon pm-icon-normal collection-sidebar-list-item__head__favorite-button-icon"}))))),s.createElement("div",{className:this.getActionsClasses()},s.createElement("div",{className:"collection-sidebar-list-item__head__action"},s.createElement(f.default,{identifier:"options"},s.createElement("div",{className:"collection-sidebar-dropdown-actions-wrapper"},(n.isHovered||n.dropdownOpen)&&s.createElement(I.default,{className:"collection-sidebar-actions-dropdown",onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle,actions:o.actions}))))))))))}},[a.observer,(0,o.DragSource)("collection-sidebar-collection-item",{canDrag(e){return!e.item._persistentState.isEditing&&(0,b.isWorkspaceMember)()},beginDrag(e){return{id:e.item.id,type:"collection"}}},((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}))),(0,o.DropTarget)(["collection-sidebar-request-item","collection-sidebar-folder-item"],{canDrop(e){return e.item.userCanUpdate},drop(e,t){const i=t.getItem().id,s=e.item.id;let o=!1;switch(t.getItem().type){case"folder":case"request":e.item.userCanUpdate&&(o=!0)}return i!==s&&o?{dropItem:{id:s,type:"collection"},position:"on"}:{}}},((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0}),canDrop:t.canDrop()}))),(0,m.default)([{label:"Add Request",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_REQUEST)}},{label:"Add Folder",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_FOLDER)}},{label:"Monitor Collection",isVisible(e){const t=(0,g.getStore)("PermissionStore"),i=(0,g.getStore)("ActiveWorkspaceStore").id;return(0,g.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.userCanCreateMonitor&&t.can("addMonitor","workspace",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_MONITOR)}},{label:"Mock Collection",isVisible(e){const t=(0,g.getStore)("PermissionStore"),i=(0,g.getStore)("ActiveWorkspaceStore").id;return(0,g.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.userCanCreateMock&&t.can("addMock","workspace",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_ADD_MOCK)}},{label:"Create a fork",isVisible(){return(0,g.getStore)("OnlineStatusStore").userCanSaveAndSync},onClick(e){e.item.handleAction(_.ACTION_TYPE_FORK)}},{label:"Merge changes",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.isForked},onClick(e){e.item.handleAction(_.ACTION_TYPE_MERGE)}},{label:"Create Pull Request",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.item.isForked},onClick(e){e.item.handleAction(_.ACTION_TYPE_PULL_REQUEST)}},{label:"Rename",shortcut:"rename",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanUpdate},onClick(e){e.item.handleAction(_.ACTION_TYPE_RENAME_TOGGLE)}},{label:"Duplicate",shortcut:"duplicate",isVisible(){const e=(0,g.getStore)("PermissionStore"),t=(0,g.getStore)("ActiveWorkspaceStore").id;return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.can("addCollection","workspace",t)},onClick(e){e.item.handleAction(_.ACTION_TYPE_DUPLICATE)}},{label:"Export",isVisible(e){const t=(0,g.getStore)("PermissionStore"),i=(0,E.decomposeUID)(e.item.id).modelId,{userCanSave:s}=(0,g.getStore)("OnlineStatusStore");return s&&t.can("view","collection",i)},onClick(e){e.item.handleAction(_.ACTION_TYPE_DOWNLOAD)}},{label:"Manage Roles",isVisible(){const e=(0,g.getStore)("CurrentUserStore");return(0,g.getStore)("OnlineStatusStore").userCanSave&&Boolean(e.team)},onClick(e){e.item.handleAction(_.ACTION_MANAGE_ROLES)}},{label:"Remove from workspace",isVisible(){const e=(0,g.getStore)("PermissionStore"),t=(0,g.getStore)("ActiveWorkspaceStore").id,i=(0,g.getStore)("SyncStatusStore").isSocketConnected;return(0,g.getStore)("OnlineStatusStore").userCanSaveAndSync&&e.can("removeCollection","workspace",t)&&i},onClick(e){e.item.handleAction(_.ACTION_REMOVE_FROM_WORKSPACE)}},{label:"Delete",shortcut:"delete",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.item.userCanDelete},onClick(e){e.item.handleAction(_.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))]);t.default=y,y.defaultProps={isEditing:!1,isDragOver:!1,setEditCache:O.noop,isContextMenuOpen:O.noop,editCache:null,connectDragSource:O.noop,connectDropTarget:O.noop,connectDragPreview:O.noop,canDrop:!1},y.propTypes={item:r().object.isRequired,model:r().instanceOf(S.default).isRequired,editCache:r().object,isEditing:r().bool,isDragOver:r().bool,setEditCache:r().func,isContextMenuOpen:r().func,connectDragSource:r().func,connectDropTarget:r().func,connectDragPreview:r().func,canDrop:r().bool}},6673:function(e,t,i){i.r(t);var s=i(1),o=i(2102),n=i.n(o),r=i(12);t.default=function(e){return s.createElement("div",{className:"collection-sidebar-list-item__loading"},r.times(e.depth,(t=>s.createElement("div",{key:`indent-${t}`,className:n()("collection-sidebar__indent",{"active-indent":t===Number(e.activeIndent.depth)&&e.activeIndent.show})}))),s.createElement("div",{className:"sidebar-loading-state--item"},s.createElement("div",{className:n()("has","sidebar-loading-state__icon")}),s.createElement("div",{className:"sidebar-loading-state__info"})))}},6667:function(e,t,i){i.r(t);var s=i(1),o=i(4),n=i(2102),r=i.n(n),a=i(2119),l=i.n(a),d=i(2890),c=i(2112),p=i(2098),h=i(3787),u=i(3046),m=i(5628),g=i(1822),f=i(2584),E=i(2537),I=i(6668),b=i(3684),C=i(6658),_=i(2090),S=i(6666),v=i(1821),T=i(12);const O={canDrag(e){return!e.item._persistentState.isEditing&&((0,_.isWorkspaceMember)()&&e.collection.userCanUpdate)},beginDrag(e){return{id:e.item.id,type:"request",folder:e.item.folder,collection:e.item.collection}},endDrag(e,t){const i=t.getItem(),{dropItem:s,position:o}=t.getDropResult()||{};T.isUndefined(s)||e.onDragDrop(i,s,o)}},y={hover(e,t,i){const{persistentState:s}=e,n=t.getItem().id,r=e.item.id,a=t.getItem();let l=!1;if("response"!==a.type&&"request"!==a.type||(l=e.collection.userCanUpdate),n===r||!l)return{};const d=t.getClientOffset(),c=(0,o.findDOMNode)(i).getBoundingClientRect(),p=c.top+30-7.5,h=c.top+7.5;"response"!==t.getItem().type&&d.y>p?s.scheduleHoverUpdate("bottom"):"response"!==t.getItem().type&&d.y<h?s.scheduleHoverUpdate("top"):"request"!==t.getItem().type&&d.y<p&&d.y>h&&s.scheduleHoverUpdate("on")},drop(e,t,i){const s=t.getItem().id,n=e.item.id,r=t.getItem();let a=!1;if("request"!==r.type&&"response"!==r.type||(a=e.collection.userCanUpdate),s===n||!a)return{};const l=t.getClientOffset(),d=(0,o.findDOMNode)(i).getBoundingClientRect(),c=.25*d.height,p=d.bottom-c,h=d.top+c;let u="after";return"response"!==t.getItem().type&&l.y>p?u="after":"response"!==t.getItem().type&&l.y<h?u="before":"response"===t.getItem().type&&(u="on"),{dropItem:{id:e.item.id,type:"request",collection:e.item.collection},position:u}}},D=(0,v.c)(class extends S.default{constructor(e){super(e),this.onItemClick=this.onItemClick.bind(this),this.handleItemToggle=this.handleItemToggle.bind(this),this.setInlineInputRef=this.setInlineInputRef.bind(this),this.onInlineInputSubmit=this.onInlineInputSubmit.bind(this),this.onInlineInputToggle=this.onInlineInputToggle.bind(this),this.handleDropdownToggle=this.handleDropdownToggle.bind(this),this.handleActionSelect=this.handleActionSelect.bind(this)}getClasses(){return r()({"collection-sidebar-list-item__entity":!0,"collection-sidebar-list-item__request":!0,"is-active":this.props.selected})}getHeadClasses(){return r()({"collection-sidebar-list-item__request__head":!0,"is-open":this.isOpen(),"is-hovered":this.props.persistentState.dropdownOpen,"is-selected":this.props.selected,"is-focused":this.props.isFocused,"is-dragged":this.props.isDragging,"is-drop-hovered-top":this.props.persistentState.dropHoverTop&&this.props.isDragOver,"is-drop-hovered-bottom":this.props.persistentState.dropHoverBottom&&this.props.isDragOver,"is-right-above":this.props.persistentState.dropHover&&this.props.isDragOver})}isOpen(){return this.props.model.isOpen(this.props.item.id)}onItemClick(e){this.props.isContextMenuOpen()||super.onItemClick(e)}render(){const{connectDragSource:e,connectDropTarget:t,connectDragPreview:i,model:o,item:n,persistentState:a}=this.props,l=n.depth,d=Boolean(n.responses.size),p=o.isOpen(n.id)?"down":"right";return super.render(this.getClasses(),t(i(e(s.createElement("div",{title:n.name,className:this.getHeadClasses(),onClick:this.onItemClick},T.times(l,(e=>s.createElement("div",{key:`indent-${e}`,className:r()("collection-sidebar__indent",{"active-indent":this.showActiveIndent(e)})}))),d?s.createElement(E.Button,{type:"icon",onClick:this.handleItemToggle,className:"collection-sidebar-list-item__toggle-btn"},s.createElement(c.default,{name:`icon-direction-${p}`,className:"pm-icon pm-icon-normal"})):s.createElement("div",{className:"collection-sidebar-list__request-spacing"}),s.createElement(m.default,{method:n.method||"GET"}),s.createElement(f.default,{identifier:"head"},s.createElement("div",{className:"collection-sidebar-list-item__request__meta"},s.createElement(u.default,{className:"collection-sidebar-list-item__entity__name collection-sidebar-list-item__request__name",placeholder:"Request Name",ref:this.setInlineInputRef,value:n.name,onSubmit:this.onInlineInputSubmit,onToggleEdit:this.onInlineInputToggle}))),s.createElement("div",{className:"collection-sidebar-list-item__request__actions"},(a.isHovered||a.dropdownOpen)&&s.createElement(f.default,{identifier:"requestOption"},s.createElement("div",{className:"collection-sidebar-request-dropdown-actions-wrapper"},s.createElement(I.default,{className:"collection-sidebar-request-actions-dropdown",actions:n.actions,onSelect:this.handleActionSelect,onToggle:this.handleDropdownToggle})))))))))}},[p.observer,(0,d.DragSource)("collection-sidebar-request-item",O,((e,t)=>({connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}))),(0,d.DropTarget)(["collection-sidebar-request-item","collection-sidebar-response-item"],y,((e,t)=>({connectDropTarget:e.dropTarget(),isDragOver:t.isOver({shallow:!0})}))),(0,h.default)([{label:"Open in Tab",onClick(e){e.item.handleAction(b.ACTION_TYPE_OPEN,{},{preview:!1})}},{label:"Rename",shortcut:"rename",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_RENAME_TOGGLE)}},{label:"Duplicate",shortcut:"duplicate",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_DUPLICATE)}},{label:"Delete",shortcut:"delete",isVisible(e){return(0,g.getStore)("OnlineStatusStore").userCanSave&&e.collection.userCanUpdate},onClick(e){e.item.handleAction(b.ACTION_TYPE_DELETE)}}],(e=>({isContextMenuOpen:e.isOpen})))]);t.default=D,D.defaultProps={isFocused:!1,isDragOver:!1,isDragging:!1,selected:!1,isContextMenuOpen:T.noop,connectDragSource:T.noop,connectDropTarget:T.noop,connectDragPreview:T.noop},D.propTypes={collection:l().object.isRequired,item:l().object.isRequired,model:l().instanceOf(C.default).isRequired,activeIndent:l().object.isRequired,isFocused:l().bool,isDragOver:l().bool,isDragging:l().bool,selected:l().bool,isContextMenuOpen:l().func,connectDragSource:l().func,connectDropTarget:l().func,connectDragPreview:l().func}},6666:function(e,t,i){i.r(t),i.d(t,{default:function(){return o}});var s=i(1);i(6658);class o extends s.Component{constructor(e){super(e),this.inlineInputRef=null}UNSAFE_componentWillUpdate(e){if(!this.props.isFocused&&e.isFocused){if(!this.$node)return;this.$node.scrollIntoViewIfNeeded?this.$node.scrollIntoViewIfNeeded():this.$node.scrollIntoView&&this.$node.scrollIntoView()}}componentWillUnmount(){this.props.persistentState.cancelHoverUpdate(),this.is_editing_reaction_dispose&&this.is_editing_reaction_dispose(),this.props.persistentState.clearInputRef()}onInlineInputToggle(e){const{persistentState:t}=this.props;e?t.focusOnInput():t.clearEditStateCache()}onInlineInputSubmit(e){const{item:t}=this.props;t.commitRename(e)}onItemClick(e){const{item:t,model:i}=this.props;i.focusItem(t),!i.isOpen(t.id)&&i.expandItem(t),t.openInTab(e)}setInlineInputRef(e){this.props.persistentState.setInputRef(e)}handleMouseHover(e){this.props.persistentState.setHovered(e)}handleActionSelect(e){const{item:t}=this.props;t.handleAction(e)}handleDropdownToggle(e){this.props.persistentState.setDropdownOpen(e)}handleItemToggle(e){const{model:t,item:i}=this.props;e&&e.stopPropagation(),t.toggleItem(i)}showActiveIndent(e){const{show:t,depth:i}=this.props.activeIndent;return t&&e===Number(i)}render(e,t){const i=this.handleMouseHover.bind(this,!0),o=this.handleMouseHover.bind(this,!1);return s.createElement("div",{ref:e=>{this.$node=e},className:e,onMouseOver:i,onMouseLeave:o},t)}}o.defaultProps={isFocused:!1,activeIndent:{show:!1,depth:0}}},6674:function(e,t,i){i.r(t);var s=i(1),o=i(2098),n=i(2537),r=i(1822),a=i(1827),l=i(6675),d=i(2884),c=i(2090),p=(i(6658),i(3697)),h=i(3049),u=i(1821),m=i(12);const g=(0,u.c)(class extends s.Component{constructor(e){super(e),this.state={isCollectionCreateEnabled:!0},this.handleNewCollectionClick=this.handleNewCollectionClick.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}handleNewCollectionClick(){this.setState({isCollectionCreateEnabled:!1}),this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.setState({isCollectionCreateEnabled:!0})}),1e3),(0,p.createCollection)()}handleTrashOpen(){if(!(0,c.isWorkspaceMember)()){if((0,c.canJoinWorkspace)())return pm.mediator.trigger("openUnjoinedWorkspaceModal");if(!(0,c.isLoggedIn)())return pm.mediator.trigger("showSignInModal",{type:"trash",origin:"open_trash"})}a.default.transitionTo("trash")}handleSearchChange(e){this.props.model&&this.props.model.setSearchQuery(e)}render(){const e=(0,r.getStore)("PermissionStore"),t=(0,r.getStore)("ActiveWorkspaceStore").id,i=e.can("addCollection","workspace",t),{userCanSave:o}=(0,r.getStore)("OnlineStatusStore"),a=o&&i&&this.state.isCollectionCreateEnabled;return s.createElement("div",{className:"collection-sidebar-menu"},s.createElement(l.default,{createNewConfig:{tooltip:o?i?"Create new collection":"You don't have permission to create a Collection in this workspace.":h.DISABLED_TOOLTIP_IS_OFFLINE,disabled:!a,onCreate:this.handleNewCollectionClick,xPathIdentifier:"addCollection"},onSearch:this.handleSearchChange,searchQuery:m.get(this.props.model,"searchQuery"),moreActions:s.createElement(d.DropdownMenu,null,s.createElement(d.MenuItem,null,s.createElement(n.Button,{onClick:this.handleTrashOpen,tooltip:"You need to be in a workspace to open trash",disabled:!0,type:"text",className:"collection-sidebar-menu__actions-trash"},"Open Trash")))}))}},[o.observer]);t.default=g},6658:function(e,t,i){i.r(t),i.d(t,{CollectionModel:function(){return G},FolderModel:function(){return V},PersistentState:function(){return $},RequestModel:function(){return Q},ResponseModel:function(){return B},default:function(){return ie}});var s,o,n,r,a,l,d=i(1006),c=i(1822),p=i(1715),h=i(6659),u=i(3918),m=i(3910),g=i(5940),f=i(5964),E=i(3685),I=i(3048),b=i(3697),C=i(3703),_=i(3673),S=i(3686),v=i(3684),T=i(3705),O=i(3707),y=i(4198),D=i(1821),A=i(12),N=0;function P(e){return"__private_"+N+++"_"+e}const R=300,w="loading";function L(){pm.toasts.error("You do not have permissions to perform this action")}function U(e){pm.toasts.error(`Could not move ${A.capitalize(e)} successfully`)}var k=P("dropdownOpen"),F=P("dropHoverTop"),x=P("dropHoverBottom"),M=P("dropHover"),q=P("isHovered");class ${constructor(){Object.defineProperty(this,k,{writable:!0,value:void(0,D.i)(this,"dropdownOpen")}),Object.defineProperty(this,F,{writable:!0,value:void(0,D.i)(this,"dropHoverTop")}),Object.defineProperty(this,x,{writable:!0,value:void(0,D.i)(this,"dropHoverBottom")}),Object.defineProperty(this,M,{writable:!0,value:void(0,D.i)(this,"dropHover")}),Object.defineProperty(this,q,{writable:!0,value:void(0,D.i)(this,"isHovered")}),this.isEditing=!1,this.editStateCache=null,this.inputRef=null,this._hoverUpdateAnimationFrame=null}clearEditStateCache(){this.editStateCache=null}getEditStateCacheValue(){return this.editStateCache.value}setHovered(e){this.isHovered=e}scheduleHoverUpdate(e){this._hoverUpdateAnimationFrame&&this.cancelHoverUpdate(),this._hoverUpdateAnimationFrame=requestAnimationFrame((()=>{try{"bottom"===e?this.dropHoverBottom||(0,d.runInAction)((()=>{this.dropHoverBottom=!0,this.dropHoverTop=!1,this.dropHover=!1})):"top"===e?this.dropHoverTop||(0,d.runInAction)((()=>{this.dropHoverBottom=!1,this.dropHoverTop=!0,this.dropHover=!1})):"on"===e?(0,d.runInAction)((()=>{this.dropHoverBottom=!1,this.dropHoverTop=!1,this.dropHover=!0})):(0,d.runInAction)((()=>{this.dropHoverBottom=!1,this.dropHoverTop=!1,this.dropHover=!1}))}finally{this._hoverUpdateAnimationFrame=null}}))}cancelHoverUpdate(){cancelAnimationFrame(this._hoverUpdateAnimationFrame)}setDropdownOpen(e){this.dropdownOpen=e}startEditing(){this.isEditing||(this.inputRef&&this.inputRef.startEditing(),this.isEditing=!0)}stopEditing(){this.isEditing&&(this.inputRef&&this.inputRef.stopEditing(),this.isEditing=!1)}setInputRef(e){e&&(this.inputRef=e,this.isEditing&&this.editStateCache&&this.inputRef.setEditState(this.editStateCache),this.clearEditStateCache())}clearInputRef(){this.isEditing&&this.inputRef&&(this.editStateCache=this.inputRef.getEditState()),this.inputRef=null}focusOnInput(){this.inputRef.focus(),this.inputRef.selectAll()}}function Y(e){return class extends e{startRename(){this._persistentState.startEditing()}cancelRename(){this._persistentState.stopEditing()}commitCachedRename(){if(!this._persistentState.isEditing)return;if(this._persistentState.stopEditing(),A.isNil(this._persistentState.editStateCache))return;const e=this._persistentState.getEditStateCacheValue();this.commitRename(e)}dispose(){this.commitCachedRename(),A.isFunction(super.dispose)&&super.dispose()}}}s=$,(0,D.g)(s.prototype,"dropdownOpen",[d.observable],(function(){return!1})),(0,D.g)(s.prototype,"dropHoverTop",[d.observable],(function(){return!1})),(0,D.g)(s.prototype,"dropHoverBottom",[d.observable],(function(){return!1})),(0,D.g)(s.prototype,"dropHover",[d.observable],(function(){return!1})),(0,D.g)(s.prototype,"isHovered",[d.observable],(function(){return!1})),(0,D.n)(s.prototype,"setHovered",[d.action]),(0,D.n)(s.prototype,"scheduleHoverUpdate",[d.action]),(0,D.n)(s.prototype,"setDropdownOpen",[d.action]);var H=P("attributes");class G extends(Y(u.default)){constructor(e,t){super(e),this.depth=0,this.folders=d.observable.map([],{deep:!1}),this.requests=d.observable.map([],{deep:!1}),Object.defineProperty(this,H,{writable:!0,value:void(0,D.i)(this,"attributes")}),this._persistentState=new $,this.update(e),this.$model=t,this.openInTab=A.debounce(this._openInTab,R,{leading:!0})}update(e){super.update(e),A.has(e,"attributes")&&(this.attributes=e.attributes)}setFavorite(e){this.attributes&&this.attributes.flags&&(this.attributes.flags.isFavorite=e)}toggleIsFavorite(){const e=A.get(this.attributes,"flags.isFavorite");this.attributes&&this.attributes.flags&&(this.attributes.flags.isFavorite=!e)}commitRename(e){this.handleAction(v.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t){if((0,b.collectionActionAllowedInWorkspace)(e)){if(e===v.ACTION_TYPE_DELETE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.userCanDelete?(0,b.deleteCollection)(this.id,{name:this.name}).then((e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_RENAME)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?(0,b.renameCollection)(this.id,t.name).then((()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_REMOVE_FROM_WORKSPACE)return(0,c.getStore)("OnlineStatusStore").userCanSaveAndSync?void pm.mediator.trigger("showRemoveFromWorkspaceModal",this.id,{type:E.COLLECTION,origin:"sidebar",disableDelete:!this.userCanDelete,disableShare:!this.userCanShare},(()=>{this.$model.focusPreviousItem(),this.$model.removeEntity(this),T.default.closeByRoute(O.WORKFLOW_URL.OPEN_COLLECTION,{cid:this.id})})):(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_RENAME_TOGGLE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_DUPLICATE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.userCanUpdate?(0,b.duplicateCollection)(this.id,{origin:"sidebar"}):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_ADD_FOLDER){if(!(0,c.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();const{owner:e}=(0,p.decomposeUID)(this.id)||{},t="fakeId",i=(0,p.composeUID)(t,e),s={id:i,type:w,depth:1,order:[],foldersOrder:[],parent:this};this.folders.set(i,s),this.foldersOrder.push(t)}if(e===v.ACTION_TYPE_ADD_REQUEST){if(!(0,c.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();const{owner:e}=(0,p.decomposeUID)(this.id)||{},t="fakeId",i=(0,p.composeUID)(t,e),s={id:i,type:w,depth:1,responses:[],parent:this};this.requests.set(i,s),this.order.push(t)}return e===v.ACTION_TYPE_PULL_REQUEST?(0,c.getStore)("OnlineStatusStore").userCanSaveAndSync?this.isForked?(0,b.createPullRequest)(this.id,this.forkInfo):L():(0,I.showOfflineActionDisabledToast)():e===v.ACTION_TYPE_MERGE?(0,c.getStore)("OnlineStatusStore").userCanSaveAndSync?this.isForked?(0,b.mergeChanges)(this.id,this.forkInfo):L():(0,I.showOfflineActionDisabledToast)():void(0,b.collectionActions)(this.id,e,t,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.id,flags:A.get(this.attributes,"flags"),toggleIsFavorite:this.toggleIsFavorite})}}_openInTab(){(0,b.openCollectionInTab)(this.id)}get actions(){const e=(0,c.getStore)("PermissionStore"),t=(0,c.getStore)("CurrentUserStore"),i=(0,c.getStore)("ActiveWorkspaceStore").id,{userCanSave:s,userCanSaveAndSync:o}=(0,c.getStore)("OnlineStatusStore"),n=(0,p.decomposeUID)(this.id).modelId,r=(0,c.getStore)("CollectionStore").find(n);return[{type:v.ACTION_TYPE_SHARE,label:"Share collection",isEnabled:o&&this.userCanShare,xpathLabel:"share"},{type:v.ACTION_TYPE_RUN,label:"Run collection",isEnabled:(0,y.canRunCollection)(),xpathLabel:"runCollection"},{type:v.ACTION_TYPE_OPEN,label:s&&this.userCanUpdate?"Edit":"View details",isEnabled:!0,xpathLabel:"edit"},{type:v.ACTION_TYPE_ADD_REQUEST,label:"Add request",isEnabled:s&&this.userCanUpdate,xpathLabel:"addRequest"},{type:v.ACTION_TYPE_ADD_FOLDER,label:"Add folder",isEnabled:s&&this.userCanUpdate,xpathLabel:"addFolder"},{type:v.ACTION_TYPE_ADD_MONITOR,label:"Monitor collection",isEnabled:o&&this.userCanCreateMonitor&&e.can("addMonitor","workspace",i),xpathLabel:"monitor"},{type:v.ACTION_TYPE_ADD_MOCK,label:"Mock collection",isEnabled:o&&this.userCanCreateMock&&e.can("addMock","workspace",i),xpathLabel:"mock"},{type:v.ACTION_TYPE_FORK,label:"Create a fork",isEnabled:o,xpathLabel:"fork"},{type:v.ACTION_TYPE_PULL_REQUEST,label:"Create Pull Request",isEnabled:o&&this.isForked,xpathLabel:"pull-request"},{type:v.ACTION_TYPE_MERGE,label:"Merge changes",isEnabled:o&&this.isForked,xpathLabel:"merge"},{type:v.ACTION_VIEW_DOCUMENTATION,label:"View documentation",isEnabled:!1,xpathLabel:"documentation"},{type:v.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:s&&this.userCanUpdate,xpathLabel:"rename"},{type:v.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:s&&e.can("addCollection","workspace",i),xpathLabel:"duplicate"},{type:v.ACTION_TYPE_DOWNLOAD,label:"Export",isEnabled:s||r,xpathLabel:"export"},{type:v.ACTION_MANAGE_ROLES,label:"Manage roles",isEnabled:o&&!!t.team,xpathLabel:"manageRoles"},{type:v.ACTION_REMOVE_FROM_WORKSPACE,label:"Remove from workspace",isEnabled:o&&e.can("removeCollection","workspace",i),xpathLabel:"remove"},{type:v.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:s&&this.userCanDelete,xpathLabel:"delete"}]}get xpath(){return this.id}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===v.ACTION_TYPE_ADD_REQUEST||e===v.ACTION_TYPE_ADD_FOLDER?this.userCanUpdate:e===v.ACTION_TYPE_DOWNLOAD||(e===v.ACTION_TYPE_DELETE?this.userCanDelete:e===v.ACTION_TYPE_SHARE?this.userCanShare:e===v.ACTION_TYPE_RENAME?this.userCanUpdate:e!==v.ACTION_TYPE_RENAME_TOGGLE||this.userCanUpdate)}async placeNextTo(e,t,i){if(t.type!==i.type)return;const{modelId:s}=(0,p.decomposeUID)(i.id),{modelId:o}=(0,p.decomposeUID)(t.id),n="after"===e?1:-1;if(i.type===E.FOLDER){const e=[...this.foldersOrder].filter((e=>e!==s)),t=e.indexOf(o);return e.splice(t+n,0,s),(0,b.updateCollectionChildrenOrder)(this.id,{folders_order:e})}if(i.type===E.REQUEST){const e=[...this.order].filter((e=>e!==s)),t=e.indexOf(o);return e.splice(t+n,0,s),(0,b.updateCollectionChildrenOrder)(this.id,{order:e})}}}o=G,(0,D.g)(o.prototype,"attributes",[d.observable],(function(){return{}})),(0,D.n)(o.prototype,"update",[d.action]),(0,D.n)(o.prototype,"setFavorite",[d.action.bound]),(0,D.n)(o.prototype,"toggleIsFavorite",[d.action.bound]),(0,D.n)(o.prototype,"handleAction",[d.action]);class V extends(Y(m.default)){constructor(e,t){super(e),this.depth=0,this.folders=d.observable.map([],{deep:!1}),this.requests=d.observable.map([],{deep:!1}),this._persistentState=new $,this.$model=t,this.openInTab=A.debounce(this._openInTab,R,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}get $index(){const{modelId:e}=(0,p.decomposeUID)(this.id);return this.$model.getParent(this).foldersOrder.indexOf(e)}commitRename(e){this.handleAction(v.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t){if((0,C.folderActionAllowedInWorkspace)(e)){if(e===v.ACTION_TYPE_DELETE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?(0,C.deleteFolder)(this.id,{name:this.name,collectionId:this.collection}).then((e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_RENAME)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(0,C.renameFolder)(this.id,this.collection,t.name).then((()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_RENAME_TOGGLE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_DUPLICATE){if(!(0,c.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return L();const e=this.$model.getParent(this),{owner:t}=(0,p.decomposeUID)(this.id)||{},i="fakeId",s=(0,p.composeUID)(i,t),o={id:s,type:w,depth:e.depth+1,order:[],foldersOrder:[],parent:e};return e.folders.set(s,o),e.foldersOrder.splice(this.$index+1,0,i),(0,C.duplicateFolder)(this.id,{parentModel:e.type,parentId:e.id})}if(e===v.ACTION_TYPE_ADD_FOLDER){if(!(0,c.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();const{owner:e}=(0,p.decomposeUID)(this.id)||{},t="fakeId",i=(0,p.composeUID)(t,e),s={id:i,type:w,depth:this.depth+1,order:[],foldersOrder:[],parent:this};this.folders.set(i,s),this.foldersOrder.push(t)}if(e===v.ACTION_TYPE_ADD_REQUEST){if(!(0,c.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();const{owner:e}=(0,p.decomposeUID)(this.id)||{},t="fakeId",i=(0,p.composeUID)(t,e),s={id:i,type:w,depth:this.depth+1,responses:[],parent:this};this.requests.set(i,s),this.order.push(t)}(0,C.folderActions)(this.id,e,t,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection})}}_openInTab(){(0,C.openFolderInTab)(this.id)}get actions(){const{userCanSave:e}=(0,c.getStore)("OnlineStatusStore");return[{type:v.ACTION_TYPE_OPEN,label:this.$collection.userCanUpdate?"Edit":"View Details",isEnabled:!0,xpathLabel:"edit"},{type:v.ACTION_TYPE_ADD_REQUEST,label:"Add Request",isEnabled:e&&this.$collection.userCanUpdate},{type:v.ACTION_TYPE_ADD_FOLDER,label:"Add Folder",isEnabled:e&&this.$collection.userCanUpdate},{type:v.ACTION_VIEW_DOCUMENTATION,label:"View Documentation",isEnabled:!1},{type:v.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate},{type:v.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate},{type:v.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate}]}get xpath(){return`${this.$model.getParent(this).xpath}/folder/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const i=this.$model.getModel(e.type).get(e.id),{owner:s}=(0,p.decomposeUID)(this.id)||{},o="fakeId",n=(0,p.composeUID)(o,s),r={id:n,type:w,depth:i.depth+1,order:[],foldersOrder:[],parent:i};i.folders.set(n,r),i.foldersOrder.push(o),t.foldersOrder.splice(this.$index,1),t.folders.delete(this.id),await(0,C.transferFolder)(this.id,e.type,e.id)}async reorder(e,t){const i=this.$model.getModel(e.type).get(e.id),s=this.$model.getParent(e),o=this.$model.getParent(this),n=this.$model.getParent(e),{owner:r,modelId:a}=(0,p.decomposeUID)(this.id)||{},l="fakeId",c=(0,p.composeUID)(l,r),h={id:c,type:w,depth:n.depth+1,order:[],foldersOrder:[],parent:n},u="before"===t?0:1,m=i.$index+u;n.folders.set(c,h),n.foldersOrder.splice(m,0,l),o.foldersOrder.splice(this.$index,1),o.folders.delete(this.id),(0,C.reorderFolder)(this.id,s.type,s.id,e.id,t).catch((0,d.action)((()=>{n.foldersOrder.splice(m,1),n.folders.delete(h.id),o.folders.set(this.id,this),o.foldersOrder.splice(this.$index,0,a),U(this.type)})))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:i}=(0,p.decomposeUID)(this.id)||{},s="fakeId",o=(0,p.composeUID)(s,i),n={id:o,type:w,depth:t.depth+1,order:[],foldersOrder:[],parent:t};t.folders.set(o,n),t.foldersOrder.push(s),await(0,C.copyFolderTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===v.ACTION_TYPE_ADD_REQUEST||e===v.ACTION_TYPE_ADD_FOLDER||e===v.ACTION_TYPE_DELETE||e===v.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==v.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}async placeNextTo(e,t,i){if(t.type!==i.type)return;const{modelId:s}=(0,p.decomposeUID)(i.id),{modelId:o}=(0,p.decomposeUID)(t.id),n="after"===e?1:-1;if(i.type===E.FOLDER){const e=[...this.foldersOrder].filter((e=>e!==s)),t=e.indexOf(o);return e.splice(t+n,0,s),(0,C.updateFolderChildrenOrder)(this.id,{folders_order:e})}if(i.type===E.REQUEST){const e=[...this.order].filter((e=>e!==s)),t=e.indexOf(o);return e.splice(t+n,0,s),(0,C.updateFolderChildrenOrder)(this.id,{order:e})}}}n=V,(0,D.n)(n.prototype,"handleAction",[d.action]),(0,D.n)(n.prototype,"transfer",[d.action]),(0,D.n)(n.prototype,"reorder",[d.action]),(0,D.n)(n.prototype,"pasteTo",[d.action]);class Q extends(Y(g.default)){constructor(e,t){super(e),this.depth=0,this.responses=d.observable.map([],{deep:!1}),this._persistentState=new $,this.$model=t,this.openInTab=A.debounce(this._openInTab,R,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}get $index(){const{modelId:e}=(0,p.decomposeUID)(this.id);return this.$model.getParent(this).order.indexOf(e)}commitRename(e){this.handleAction(v.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t,i){if((0,_.requestActionAllowedInWorkspace)(e)){if(e===v.ACTION_TYPE_DELETE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?(0,_.deleteRequest)(this.id,{name:this.name,collectionId:this.collection}).then((e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_RENAME)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(0,_.renameRequest)(this.id,this.collection,t.name).then((()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_RENAME_TOGGLE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_DUPLICATE){if(!(0,c.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return L();const e=this.$model.getParent(this),{owner:t}=(0,p.decomposeUID)(this.id)||{},i="fakeId",s=(0,p.composeUID)(i,t),o={id:s,type:w,depth:e.depth+1,responses:[],parent:e};return e.requests.set(s,o),e.order.splice(this.$index+1,0,i),(0,_.duplicateRequest)(this.id,{parentModel:e.type,parentId:e.id})}(0,_.requestActions)(this.id,e,t,{...i||{},origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection})}}_openInTab(e){const t=e&&(e.metaKey||e.ctrlKey)&&e.shiftKey;(0,_.openRequestInTab)(this.id,{forceNew:t})}get actions(){const{userCanSave:e}=(0,c.getStore)("OnlineStatusStore");return[{type:v.ACTION_TYPE_ADD_EXAMPLE,label:"Add example",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:v.ACTION_TYPE_ADD_EXAMPLE},{type:v.ACTION_VIEW_DOCUMENTATION,label:"View Documentation",isEnabled:!1,xpathLabel:v.ACTION_VIEW_DOCUMENTATION},{type:v.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:v.ACTION_TYPE_RENAME_TOGGLE},{type:v.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:v.ACTION_TYPE_DUPLICATE},{type:v.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:v.ACTION_TYPE_DELETE}]}get xpath(){return`${this.$model.getParent(this).xpath}/request/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const i=this.$model.getModel(e.type).get(e.id),{owner:s}=(0,p.decomposeUID)(this.id)||{},o="fakeId",n=(0,p.composeUID)(o,s),r={id:n,type:w,depth:i.depth+1,responses:[],parent:i};return i.requests.set(n,r),i.order.push(o),t.order.splice(this.$index,1),t.requests.delete(this.id),(0,_.transferRequest)(this.id,e.type,e.id,t.type,t.id)}async reorder(e,t){const i=this.$model.getModel(e.type).get(e.id),s=this.$model.getParent(e),o=this.$model.getParent(this),n=this.$model.getParent(e),{owner:r,modelId:a}=(0,p.decomposeUID)(this.id)||{},l="fakeId",c=(0,p.composeUID)(l,r),h={id:c,type:w,depth:n.depth+1,responses:[],parent:n},u="before"===t?0:1,m=i.$index+u;n.requests.set(c,h),n.order.splice(m,0,l),o.order.splice(this.$index,1),o.requests.delete(this.id),(0,_.reorderRequest)(this.id,s.type,s.id,e.id,t).catch((0,d.action)((()=>{n.order.splice(m,1),n.requests.delete(h.id),o.requests.set(this.id,this),o.order.splice(this.$index,0,a),U(this.type)})))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:i}=(0,p.decomposeUID)(this.id)||{},s="fakeId",o=(0,p.composeUID)(s,i),n={id:o,type:w,depth:t.depth+1,responses:[],parent:t};t.requests.set(o,n),t.order.push(s),await(0,_.copyRequestTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===v.ACTION_TYPE_ADD_EXAMPLE||e===v.ACTION_TYPE_DELETE||e===v.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==v.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}}r=Q,(0,D.n)(r.prototype,"handleAction",[d.action]),(0,D.n)(r.prototype,"transfer",[d.action]),(0,D.n)(r.prototype,"reorder",[d.action]),(0,D.n)(r.prototype,"pasteTo",[d.action]);class B extends(Y(f.default)){constructor(e,t){super(e),this.depth=0,this._persistentState=new $,this.$model=t,this.method=e.method,this.openInTab=A.debounce(this._openInTab,R,{leading:!0})}get $collection(){return this.$model.getParentCollection(this)}update(e){super.update(e),A.has(e,"method")&&(this.method=e.method)}commitRename(e){this.handleAction(v.ACTION_TYPE_RENAME,{name:e})}async handleAction(e,t){if((0,S.exampleActionAllowedInWorkspace)(e)){if(e===v.ACTION_TYPE_DELETE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanDelete?(0,S.deleteExample)(this.id,{name:this.name,collectionId:this.collection}).then((e=>{e&&(this.$model.focusPreviousItem(),this.$model.removeEntity(this))})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_RENAME)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(0,S.renameExample)(this.id,this.collection,t.name).then((()=>{this.update({name:t.name}),pm.mediator.trigger("focusSidebar")})).catch((t=>{pm.logger.error("CollectionSidebarModel~handleAction - ",e,t)})):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_RENAME_TOGGLE)return(0,c.getStore)("OnlineStatusStore").userCanSave?this.$collection.userCanUpdate?(this.$model.focusItem(this),void this.startRename()):L():(0,I.showOfflineActionDisabledToast)();if(e===v.ACTION_TYPE_DUPLICATE){if(!(0,c.getStore)("OnlineStatusStore").userCanSave)return(0,I.showOfflineActionDisabledToast)();if(!this.$collection.userCanUpdate)return L();const{owner:e}=(0,p.decomposeUID)(this.id);return(0,S.duplicateExample)(this.id,{origin:"sidebar",collectionId:this.$collection.id}).then((t=>new B({...t,id:(0,p.composeUID)(t.id,e),request:this.request,collection:this.collection},this.$model)))}(0,S.exampleActions)(this.id,e,t,{origin:"sidebar",canPerform:this.__checkPermission.bind(this),collectionId:this.collection})}}_openInTab(){(0,S.openExampleInTab)(this.id)}get actions(){const{userCanSave:e}=(0,c.getStore)("OnlineStatusStore");return[{type:v.ACTION_TYPE_RENAME_TOGGLE,label:"Rename",shortcut:"rename",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:v.ACTION_TYPE_RENAME_TOGGLE},{type:v.ACTION_TYPE_DUPLICATE,label:"Duplicate",shortcut:"duplicate",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:v.ACTION_TYPE_DUPLICATE},{type:v.ACTION_TYPE_DELETE,label:"Delete",shortcut:"delete",isEnabled:e&&this.$collection.userCanUpdate,xpathLabel:v.ACTION_TYPE_DELETE}]}get $index(){const e=this.$model.getParent(this);const{modelId:t}=(0,p.decomposeUID)(this.id);return e.responsesOrder.indexOf(t)}get xpath(){return`${this.$model.getParent(this).xpath}/response/${this.$index}`}async transfer(e){const t=this.$model.getParent(this);if(t.id===e.id&&t.type===e.type)return;const i=this.$model.getModel(e.type).get(e.id),{owner:s}=(0,p.decomposeUID)(this.id)||{},o="fakeId",n=(0,p.composeUID)(o,s),r={id:n,type:w,depth:i.depth+1,parent:i};return i.responses.set(n,r),i.responsesOrder.push(o),t.responsesOrder.splice(this.$index,1),(0,S.transferResponse)(this.id,e.type,e.id,t.type,t.id)}async reorder(e,t){const i=this.$model.getModel(e.type).get(e.id),s=this.$model.getParent(e),o=this.$model.getParent(this),n=this.$model.getParent(e),{owner:r,modelId:a}=(0,p.decomposeUID)(this.id)||{},l="fakeId",c=(0,p.composeUID)(l,r),h={id:c,type:w,depth:n.depth+1,parent:n},u="before"===t?0:1,m=i.$index+u;n.responses.set(c,h),n.responsesOrder.splice(m,0,l),o.responsesOrder.splice(this.$index,1),(0,S.reorderResponse)(this.id,s.type,s.id,e.id,t).catch((0,d.action)((()=>{n.responsesOrder.splice(m,1),n.responses.delete(h.id),o.responses.set(this.id,this),o.responsesOrder.splice(this.$index,0,a),U(this.type)})))}async pasteTo(e){const t=this.$model.getModel(e.type).get(e.id),{owner:i}=(0,p.decomposeUID)(this.id)||{},s="fakeId",o=(0,p.composeUID)(s,i),n={id:o,type:w,depth:t.depth+1,parent:t};t.responses.set(o,n),t.responsesOrder.push(s),await(0,S.copyResponseTo)(this.id,e.type,e.id)}dispose(){super.dispose(),this.openInTab.cancel&&this.openInTab.cancel()}__checkPermission(e){return e===v.ACTION_TYPE_DELETE||e===v.ACTION_TYPE_RENAME?this.$collection.userCanUpdate:e!==v.ACTION_TYPE_RENAME_TOGGLE||this.$collection.userCanUpdate}}a=B,(0,D.n)(a.prototype,"handleAction",[d.action]),(0,D.n)(a.prototype,"transfer",[d.action]),(0,D.n)(a.prototype,"reorder",[d.action]),(0,D.n)(a.prototype,"pasteTo",[d.action]);var W=P("collections"),z=P("folders"),j=P("requests"),K=P("responses"),X=P("activeItem"),J=P("openGroups"),Z=P("filteredItems"),ee=P("filteredOpenGroups"),te=P("searchQuery");class ie{constructor(){Object.defineProperty(this,W,{writable:!0,value:void(0,D.i)(this,"collections")}),Object.defineProperty(this,z,{writable:!0,value:void(0,D.i)(this,"folders")}),Object.defineProperty(this,j,{writable:!0,value:void(0,D.i)(this,"requests")}),Object.defineProperty(this,K,{writable:!0,value:void(0,D.i)(this,"responses")}),this.clipboard=null,Object.defineProperty(this,X,{writable:!0,value:void(0,D.i)(this,"activeItem")}),Object.defineProperty(this,J,{writable:!0,value:void(0,D.i)(this,"openGroups")}),Object.defineProperty(this,Z,{writable:!0,value:void(0,D.i)(this,"filteredItems")}),Object.defineProperty(this,ee,{writable:!0,value:void(0,D.i)(this,"filteredOpenGroups")}),Object.defineProperty(this,te,{writable:!0,value:void(0,D.i)(this,"searchQuery")}),this.previousQuery="",this.active_item_autorun_dispose=(0,d.autorun)((()=>{const{activeEditor:e}=(0,c.getStore)("ActiveWorkspaceSessionStore"),t=(0,c.getStore)("EditorStore").find(e);if(!t||!t.resource)return void this.resetFocus();let i,s;if(A.includes(t.resource,E.REQUEST)?(s=A.last(A.split(t.resource,"/")),i=E.REQUEST):A.includes(t.resource,E.COLLECTION)?(i=E.COLLECTION,s=A.last(A.split(t.resource,"/"))):A.includes(t.resource,E.FOLDER)?(s=A.last(A.split(t.resource,"/")),i=E.FOLDER):A.includes(t.resource,E.EXAMPLE)&&(s=A.last(A.split(t.resource,"/")),i=E.RESPONSE),!i||!s)return void this.resetFocus();const o=this.getModel(i).get(s);this.expandPath(o),this.focusItem(o)})),this.filter_item_autorun_dispose=(0,d.autorun)((()=>{this.setFilteredItems()}),{delay:300}),this.search_reaction_dispose=(0,d.reaction)((()=>(0,c.getStore)("ActiveWorkspaceSessionStore").workspace),(()=>{this.setSearchQuery("")}))}getModel(e){return e===E.COLLECTION?this.collections:e===E.FOLDER?this.folders:e===E.REQUEST?this.requests:e===E.RESPONSE?this.responses:new Map}getParent(e){return e.type===E.FOLDER||e.type===E.REQUEST?e.folder?this.folders.get(e.folder):this.collections.get(e.collection):e.type===E.RESPONSE?this.requests.get(e.request):null}getParentCollection(e){return this.collections.get(e.collection)}get filteredCollections(){const e=A.filter((0,d.values)(this.collections),(e=>this.isFiltered(e.id)&&!this.isArchived(e)&&this.isInActiveWorkspace(e.id)));return(0,h.sortCollections)(e)}get items(){const e=[];return A.forEach(this.filteredCollections,(t=>{e.push(t),this.isOpen(t.id)&&e.push(...this.orderItemsRecurse(t,1))})),e}get activeCollectionId(){if(!this.activeItem)return null;if(this.activeItem.type===E.COLLECTION)return this.activeItem.id;const e=this.getModel(this.activeItem.type).get(this.activeItem.id);return e&&e.collection}orderItemsRecurse(e,t){const i=[],s=e.folders&&e.folders.size,o=e.requests&&e.requests.size;if(!s&&!o)return[{type:"empty",depth:t}];const{owner:n}=(0,p.decomposeUID)(e.id);return A.forEach(e.foldersOrder,(s=>{const o=e.folders.get((0,p.composeUID)(s,n));if(!o)return void pm.logger.warn("CollectionSidebarModel~orderItemsRecurse","Item from folderOrder missing",s);if(!this.isFiltered(o.id))return;o.depth=t,i.push(o);const r=this.isOpen(o.id)&&this.orderItemsRecurse(o,t+1)||[];i.push(...r)})),A.forEach(e.order,(s=>{const o=e.requests.get((0,p.composeUID)(s,n));o?this.isFiltered(o.id)&&(o.depth=t,i.push(o),Boolean(o.responses.size)&&this.isOpen(o.id)&&(o.responses.forEach((e=>{e.depth=t+1})),A.forEach(o.responsesOrder,(e=>{const{modelId:t}=(0,p.decomposeUID)(e),s=(0,p.composeUID)(t,n);i.push(o.responses.get(s))})))):pm.logger.warn("CollectionSidebarModel~orderItemsRecurse","Item from folderOrder missing",s)})),i.filter(Boolean)}getCollectionAdapterModel(){const e=this;return{hydrate(t){e.hydrate(t)},add(t){e.addCollection(t)},update(t){e.updateCollection(t)},updateFavorite(t,i){e.collections.get(t).setFavorite(i)},remove(t){e.removeCollectionTree(t)},clear(){e.collections.clear()}}}getFolderAdapterModel(){const e=this;return{add(t){e.addFolder(t)},update(t){e.updateFolder(t)},remove(t){const i=e.folders.get(t);i&&e.removeEntity(i)},clear(){e.folders.clear()}}}getRequestAdapterModel(){const e=this;return{add(t){e.addRequest(t)},update(t){e.updateRequest(t)},remove(t){const i=e.requests.get(t);i&&e.removeEntity(i)},clear(){e.requests.clear()}}}getResponseAdapterModel(){const e=this;return{add(t){e.addResponse(t)},update(t){e.updateResponse(t)},remove(t){const i=e.responses.get(t);i&&e.removeEntity(i)},clear(){e.responses.clear()}}}addRefToParent(e){const t=e&&this.getParent(e);if(t)switch(e.type){case E.FOLDER:t.folders.set(e.id,e);break;case E.REQUEST:t.requests.set(e.id,e);break;case E.RESPONSE:t.responses.set(e.id,e)}}removeRefFromParent(e){const t=e&&this.getParent(e);if(t)switch(e.type){case E.FOLDER:t.folders.delete(e.id);break;case E.REQUEST:t.requests.delete(e.id);break;case E.RESPONSE:t.responses.delete(e.id)}}updateFoldersFromOrder(e){e.folders.clear(),A.forEach(e.foldersOrder,(t=>{const{owner:i}=(0,p.decomposeUID)(e.id)||{},s=(0,p.composeUID)(t,i),o=this.folders.get(s);o&&e.folders.set(s,o)}))}updateRequestsFromOrder(e){e.requests.clear(),A.forEach(e.order,(t=>{const{owner:i}=(0,p.decomposeUID)(e.id)||{},s=(0,p.composeUID)(t,i),o=this.requests.get(s);o&&e.requests.set(s,o)}))}addCollection(e){Array.isArray(e)||(e=[e]),this.updateCollectionTree(e)}updateCollection(e){Array.isArray(e)||(e=[e]),A.forEach(e,(e=>{const t=this.collections.get(e.id);t&&(t.update(e),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t))}))}addFolder(e){const t=new V(e,this);this.addRefToParent(t),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t),this.folders.set(e.id,t)}updateFolder(e){const t=this.folders.get(e.id);t&&(t.update(e),this.addRefToParent(t),this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t))}addRequest(e){const t=new Q(e,this);this.addRefToParent(t),this.requests.set(e.id,t)}updateRequest(e){const t=this.requests.get(e.id);t&&(t.update(e),this.addRefToParent(t))}addResponse(e){const t=new B(e,this);this.addRefToParent(t),this.responses.set(t.id,t)}updateResponse(e){const t=this.responses.get(e.id);t&&(t.update(e),this.addRefToParent(t))}updateCollectionTree(e){A.forEach(e,(e=>{const t=new G(e,this);this.updateFoldersFromOrder(t),this.updateRequestsFromOrder(t),this.updateFolderTree(t,e.folders),this.updateRequestList(t,e.requests),this.collections.set(e.id,t)}))}updateFolderTree(e,t){A.forEach(t,(t=>{const i=new V(t,this);this.updateFolderTree(i,t.folders),this.updateRequestList(i,t.requests),this.folders.set(t.id,i),e.folders.set(t.id,i)}))}updateRequestList(e,t){A.forEach(t,(t=>{const i=new Q(t,this);this.updateResponseList(i,t.responses),this.requests.set(t.id,i),e.requests.set(t.id,i)}))}updateResponseList(e,t){A.forEach(t,(t=>{const i=new B(t,this);this.responses.set(t.id,i),e.responses.set(t.id,i)}))}removeEntity(e){e&&(this.removeRefFromParent(e),this.removeTree(e))}removeTree(e){switch(e.type){case E.COLLECTION:e.folders.forEach((e=>this.removeTree(e))),e.folders.clear(),e.requests.forEach((e=>this.removeTree(e))),e.requests.clear(),this.collections.delete(e.id);break;case E.FOLDER:e.folders.forEach((e=>this.removeTree(e))),e.folders.clear(),e.requests.forEach((e=>this.removeTree(e))),e.requests.clear(),this.folders.delete(e.id);break;case E.REQUEST:e.responses.forEach((e=>this.removeTree(e))),e.responses.clear(),this.requests.delete(e.id);break;case E.RESPONSE:this.responses.delete(e.id)}}removeCollectionTree(e){A.forEach(e,(e=>{const t=this.collections.get(e);t&&this.removeTree(t)}))}clear(){(0,d.transaction)((()=>{this.collections.clear(),this.folders.clear(),this.requests.clear(),this.responses.clear()}))}hydrate(e){this.clear(),this.updateCollectionTree(e)}get hasFilterQuery(){return Boolean(this.searchQuery)}setSearchQuery(e){this.searchQuery=e}isFiltered(e){return!this.hasFilterQuery||this.filteredItems.has(e)}isArchived(e){return!e.isPublic&&e.isArchived}isInActiveWorkspace(e){return A.get((0,c.getStore)("ActiveWorkspaceStore"),"dependencies.collections",[]).includes(e)}flattenVisibleItem(e){if(!e)return;const t=this.getModel(e.type).get(e.id);let i=[];if(!t)return;if(this.isFiltered(e.id)&&i.push(t),e.type===E.RESPONSE||!this.isOpen(t.id))return i;const{owner:s}=(0,p.decomposeUID)(t.id);return e.type===E.REQUEST?t.responses.forEach((e=>{i=i.concat(this.flattenVisibleItem(e))})):(t.foldersOrder.forEach((e=>{const t=this.folders.get((0,p.composeUID)(e,s));i=i.concat(this.flattenVisibleItem(t))})),t.order.forEach((e=>{const t=this.requests.get((0,p.composeUID)(e,s));i=i.concat(this.flattenVisibleItem(t))}))),i}handleFilterChildren(e,t,i){if(!t||!i)return;const s=this.getModel(i).get(t);if(!s)return;const{owner:o}=(0,p.decomposeUID)(s.id)||{};A.forEach(s.order,(t=>{const i=(0,p.composeUID)(t,o);!e.has(i)&&e.set(i,!1)})),A.forEach(s.foldersOrder,(t=>{const i=(0,p.composeUID)(t,o);!e.has(i)&&e.set(i,!1),this.handleFilterChildren(e,i,E.FOLDER)}))}handleFilterParent(e,t,i){if(!t||!i)return;const s=this.getModel(i).get(t);if(!s)return;let o=this.getParent(s);const n=!this.filteredItems.get(t);for(;o;)!e.has(o.id)&&e.set(o.id,!1),n&&this.filteredOpenGroups.delete(o.id),o=this.getParent(o)}updateFilteredItems(e){this.filteredItems=e,this.filteredItems.forEach(((e,t)=>{!this.filteredOpenGroups.has(t)&&this.filteredOpenGroups.set(t,!0)}))}setFilteredItems(){const e=this.searchQuery,t=d.observable.map();if(!e)return void this.openGroups.clear();const i=A.toLower(e),s=(0,d.values)(this.collections),o=(0,d.values)(this.requests),n=(0,d.values)(this.folders),r=new Set;A.forEach(s,(e=>{A.includes(A.toLower(e.name),i)&&(t.set(e.id,!0),this.handleFilterChildren(t,e.id,E.COLLECTION)),r.add(e.id)})),A.forEach(o,(e=>{if(r.has(e.collection)){if(!A.includes(A.toLower(e.name),i))return;t.set(e.id,!0),this.handleFilterParent(t,e.id,E.REQUEST)}})),A.forEach(n,(e=>{if(r.has(e.collection)){if(!A.includes(A.toLower(e.name),i))return;t.set(e.id,!0),this.handleFilterChildren(t,e.id,E.FOLDER),this.handleFilterParent(t,e.id,E.FOLDER)}})),e!==this.previousQuery&&this.filteredOpenGroups.clear(),this.updateFilteredItems(t),this.previousQuery=e}expandPath(e){let t=e;for(;t&&t.type!==E.COLLECTION;){let e;e=t.request?this.requests.get(t.request):t.folder?this.folders.get(t.folder):this.collections.get(t.collection),e&&this.expandItem(e),t=e}}expandItem(e){this.openGroups.set(e.id,!0),this.hasFilterQuery&&this.filteredOpenGroups.set(e.id,!0)}collapseItem(e){this.openGroups.delete(e.id),this.hasFilterQuery&&this.filteredOpenGroups.set(e.id,!1)}toggleItem(e){if(!e)return;this.isOpen(e.id)?this.collapseItem(e):this.expandItem(e)}isFocused(e){return Boolean(this.activeItem&&this.activeItem.id===e)}focusItem(e){e&&(e instanceof G||e instanceof V||e instanceof Q||e instanceof B?(this.resetFocus(),this.activeItem=e):pm.logger.error("CollectionSidebarModel~focusItem - item not a know instance model",e.constructor.name))}resetFocus(){this.activeItem&&this.activeItem.dispose(),this.activeItem=null}isOpen(e){return Boolean(this.hasFilterQuery?this.filteredOpenGroups.get(e):this.openGroups.get(e))}focusPreviousCollection(){const{activeCollectionId:e}=this;if(!e)return;const t=this.filteredCollections.findIndex((t=>t.id===e)),i=t<=0?this.filteredCollections.length-1:t-1;this.focusItem(A.last(this.flattenVisibleItem(this.filteredCollections[i])))}focusNextCollection(){const{activeCollectionId:e}=this;if(!e)return;const t=this.filteredCollections.findIndex((t=>t.id===e));if(t<this.filteredCollections.length-1)return this.focusItem(this.filteredCollections[t+1]);this.focusItem(this.filteredCollections[0])}focusPreviousItem(){if(!this.activeItem)return;const{activeItem:e}=this,t=this.flattenVisibleItem({id:this.activeCollectionId,type:E.COLLECTION}),i=A.findIndex(t,(t=>t.id===e.id));i>0?this.focusItem(t[i-1]):this.focusPreviousCollection()}focusNextItem(){if(!this.activeItem)return;const{activeItem:e}=this,t=e.type===E.COLLECTION?e:e.$collection,i=this.flattenVisibleItem(t),s=A.findIndex(i,(t=>t.id===e.id));i&&(s<i.length-1?this.focusItem(i[s+1]):this.focusNextCollection())}copyItem(){this.activeItem&&(this.clipboard={item:this.activeItem,action:"copy"})}cutItem(){this.activeItem&&(this.clipboard={item:this.activeItem,action:"cut"})}async pasteItem(){if(!this.clipboard)return;let e=this.activeItem;const t=this.clipboard.item,i=this.clipboard.action;if(e&&t.type!==E.COLLECTION&&(t.type!==E.RESPONSE||e.type!==E.FOLDER&&e.type!==E.COLLECTION)&&(t.type!==E.FOLDER||e.type!==E.RESPONSE)){if(t.type===E.RESPONSE&&e.type===E.RESPONSE&&(e=this.getParent(e)),t.type!==E.RESPONSE&&e.type===E.REQUEST&&(e=this.getParent(e)),this.clearClipboard(),"cut"===i)return this.reorder(t,e,"on");if("copy"===i){const i=this.getModel(t.type).get(t.id),s=this.getModel(e.type).get(e.id);return i.pasteTo(s)}}}clearClipboard(){this.clipboard=null}async reorder(e,t,i){const s=this.getModel(e.type).get(e.id),o=this.getModel(t.type).get(t.id);"on"===i?await s.transfer&&s.transfer(o):"after"!==i&&"before"!==i||await s.reorder(o,i)}dispose(){this.activeItem&&this.activeItem.dispose(),this.active_item_autorun_dispose&&this.active_item_autorun_dispose(),this.filter_item_autorun_dispose&&this.filter_item_autorun_dispose(),this.search_reaction_dispose&&this.search_reaction_dispose()}}l=ie,(0,D.g)(l.prototype,"collections",[d.observable],(function(){return d.observable.map([],{deep:!1})})),(0,D.g)(l.prototype,"folders",[d.observable],(function(){return d.observable.map([],{deep:!1})})),(0,D.g)(l.prototype,"requests",[d.observable],(function(){return d.observable.map([],{deep:!1})})),(0,D.g)(l.prototype,"responses",[d.observable],(function(){return d.observable.map([],{deep:!1})})),(0,D.g)(l.prototype,"activeItem",[d.observable],(function(){return null})),(0,D.g)(l.prototype,"openGroups",[d.observable],(function(){return new Map})),(0,D.g)(l.prototype,"filteredItems",[d.observable],(function(){return new Map})),(0,D.g)(l.prototype,"filteredOpenGroups",[d.observable],(function(){return new Map})),(0,D.g)(l.prototype,"searchQuery",[d.observable],(function(){return""})),(0,D.n)(l.prototype,"filteredCollections",[d.computed]),(0,D.n)(l.prototype,"items",[d.computed]),(0,D.n)(l.prototype,"activeCollectionId",[d.computed]),(0,D.n)(l.prototype,"addRefToParent",[d.action]),(0,D.n)(l.prototype,"removeRefFromParent",[d.action]),(0,D.n)(l.prototype,"updateFoldersFromOrder",[d.action]),(0,D.n)(l.prototype,"updateRequestsFromOrder",[d.action]),(0,D.n)(l.prototype,"addCollection",[d.action]),(0,D.n)(l.prototype,"updateCollection",[d.action]),(0,D.n)(l.prototype,"addFolder",[d.action]),(0,D.n)(l.prototype,"updateFolder",[d.action]),(0,D.n)(l.prototype,"addRequest",[d.action]),(0,D.n)(l.prototype,"updateRequest",[d.action]),(0,D.n)(l.prototype,"addResponse",[d.action]),(0,D.n)(l.prototype,"updateResponse",[d.action]),(0,D.n)(l.prototype,"updateCollectionTree",[d.action]),(0,D.n)(l.prototype,"updateFolderTree",[d.action]),(0,D.n)(l.prototype,"updateRequestList",[d.action]),(0,D.n)(l.prototype,"updateResponseList",[d.action]),(0,D.n)(l.prototype,"removeEntity",[d.action]),(0,D.n)(l.prototype,"removeTree",[d.action]),(0,D.n)(l.prototype,"removeCollectionTree",[d.action]),(0,D.n)(l.prototype,"clear",[d.action]),(0,D.n)(l.prototype,"hasFilterQuery",[d.computed]),(0,D.n)(l.prototype,"setSearchQuery",[d.action]),(0,D.n)(l.prototype,"handleFilterChildren",[d.action]),(0,D.n)(l.prototype,"handleFilterParent",[d.action]),(0,D.n)(l.prototype,"updateFilteredItems",[d.action]),(0,D.n)(l.prototype,"expandItem",[d.action]),(0,D.n)(l.prototype,"collapseItem",[d.action]),(0,D.n)(l.prototype,"toggleItem",[d.action]),(0,D.n)(l.prototype,"focusItem",[d.action]),(0,D.n)(l.prototype,"resetFocus",[d.action]),(0,D.n)(l.prototype,"focusPreviousCollection",[d.action]),(0,D.n)(l.prototype,"focusNextCollection",[d.action]),(0,D.n)(l.prototype,"focusPreviousItem",[d.action]),(0,D.n)(l.prototype,"focusNextItem",[d.action])},6657:function(e,t,i){i.r(t);var s=i(1),o=i(2098),n=i(2584),r=(i(6658),i(5614)),a=i(6660),l=i(6674),d=i(4155),c=i(6677),p=i(1821),h=i(12);const u=(0,p.c)(class extends s.Component{constructor(e){super(e),this.focus=this.focus.bind(this),this.focusCollection=this.focusCollection.bind(this),this.focusNext=this.focusNext.bind(this),this.listRef=null}getView(){const{model:e,status:t}=this.props.controller||{};return t===d.ERROR?s.createElement(c.default,{title:"Couldn’t load collections",description:"Try refreshing this page or check back in some time"}):t===d.READY?s.createElement(n.default,{identifier:"collection"},s.createElement(a.default,{ref:e=>{this.listRef=e},model:e})):s.createElement(r.default,{hasIcon:!0})}focus(){h.invoke(this,"listRef.__wrappedInstance.focus")}focusCollection(e,t){h.invoke(this,"listRef.__wrappedInstance.focusCollection",e,t)}focusNext(){const e=h.head(h.get(this.props.controller,"model.collections"));h.invoke(this,"listRef.handleSelect",e.id)}render(){const{model:e}=this.props.controller||{};return s.createElement("div",{className:"collection-sidebar"},s.createElement("div",{className:"collection-sidebar-wrapper"},s.createElement(l.default,{model:e}),this.getView()))}},[o.observer]);t.default=u},6670:function(e,t,i){i.r(t);var s=i(1),o=i(2098),n=i(1822),r=i(3080),a=i(3684),l=i(3049),d=i(1821),c=i(12);const p=(0,d.c)(class extends s.Component{constructor(e){super(e),this.getDisabledText=this.getDisabledText.bind(this)}getDisabledText(e){if(e)return(0,n.getStore)("OnlineStatusStore").userCanSave?l.DISABLED_TOOLTIP_NO_PERMISSION:l.DISABLED_TOOLTIP_IS_OFFLINE}getKeymapHandlers(){return{rename:pm.shortcuts.handle("rename",this.handleShortcutSelect.bind(this,a.ACTION_TYPE_RENAME_TOGGLE)),duplicate:pm.shortcuts.handle("duplicate",this.handleShortcutSelect.bind(this,a.ACTION_TYPE_DUPLICATE)),delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,a.ACTION_TYPE_DELETE))}}handleShortcutSelect(e){this.props.onSelect&&this.props.onSelect(e)}render(){return s.createElement(r.EntityActionsDropdown,{dropdownClassName:this.props.className,actions:this.props.actions,keymapHandlers:this.getKeymapHandlers(),onSelect:this.props.onSelect,onToggle:this.props.onToggle,getDisabledText:this.getDisabledText})}},[o.observer]);t.default=p,p.defaultProps={onToggle:c.noop,className:null}},6668:function(e,t,i){i.r(t);var s=i(1),o=i(2098),n=i(1822),r=i(3080),a=i(3684),l=i(3049),d=i(3928),c=i(1821),p=i(12);const h=(0,c.c)(class extends s.Component{constructor(e){super(e),this.getDisabledText=this.getDisabledText.bind(this)}getDisabledText(e,t){if(e)return t===a.ACTION_VIEW_DOCUMENTATION?d.DISABLED_IN_SCRATCHPAD_TOOLTIP:(0,n.getStore)("OnlineStatusStore").userCanSave?l.DISABLED_TOOLTIP_NO_PERMISSION:l.DISABLED_TOOLTIP_IS_OFFLINE}getKeymapHandlers(){return{rename:pm.shortcuts.handle("rename",this.handleShortcutSelect.bind(this,a.ACTION_TYPE_RENAME_TOGGLE)),duplicate:pm.shortcuts.handle("duplicate",this.handleShortcutSelect.bind(this,a.ACTION_TYPE_DUPLICATE)),delete:pm.shortcuts.handle("delete",this.handleShortcutSelect.bind(this,a.ACTION_TYPE_DELETE))}}handleShortcutSelect(e){this.props.onSelect&&this.props.onSelect(e)}render(){return s.createElement(r.EntityActionsDropdown,{dropdownClassName:this.props.className,actions:this.props.actions,keymapHandlers:this.getKeymapHandlers(),onSelect:this.props.onSelect,onToggle:this.props.onToggle,getDisabledText:this.getDisabledText})}},[o.observer]);t.default=h,h.defaultProps={onToggle:p.noop,className:null}},6664:function(e,t,i){i.r(t),i.d(t,{default:function(){return n}});var s=i(1),o=i(3052);function n(){return s.createElement(o.default,{name:"illustration-no-collection"})}}}]);